2023-10-28 13:21:56.181  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 13:21:56.230  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 13:21:56.230  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 13:21:56.231  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 13:21:56.232  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 13:21:56.233  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 13:21:56.266  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 13:21:56.266  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 13:21:56.641  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 13:21:56.642  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 13:21:56.642  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 13:21:56.667  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 13:21:56.683  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.684  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.749  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.750  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.774  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.775  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.796  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.797  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.813  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.814  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.825  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 13:21:56.836  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.837  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.844  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 13:21:56.844  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 13:21:56.846  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 13:21:56.856  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.857  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.866  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 13:21:56.874  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:56.874  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:21:57.000  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 13:21:57.693  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 13:21:58.320  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 13:21:59.277  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 13:21:59.278  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 13:21:59.288  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 13:21:59.510  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 13:21:59.698  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 13:21:59.702  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 13:21:59.702  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 13:21:59.702  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 13:21:59.727  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 13:21:59.727  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 13:21:59.732  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 13:21:59.740  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 13:21:59.740  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 13:21:59.742  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 13:21:59.742  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 13:21:59.743  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 13:21:59.744  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 13:21:59.745  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 13:21:59.746  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 13:21:59.746  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 13:21:59.747  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 13:21:59.748  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 13:21:59.748  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 13:21:59.748  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 13:21:59.749  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 13:21:59.749  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 13:21:59.750  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 13:21:59.751  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 13:21:59.764  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 13:21:59.765  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 13:21:59.766  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 13:21:59.766  WARNING [main                          ] org.openremote.manager.map.MapService    : Map settings file not found '/deployment/map/mapsettings.json', falling back to built in map settings
2023-10-28 13:21:59.767  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 13:21:59.768  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 13:21:59.769  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 13:21:59.770  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 13:21:59.770  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 13:21:59.771  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 13:21:59.771  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 13:21:59.772  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 13:21:59.772  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 13:21:59.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 13:21:59.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 13:21:59.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 13:21:59.774  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 13:21:59.774  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 13:21:59.774  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 13:21:59.774  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 13:21:59.775  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 13:21:59.791  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 13:21:59.797  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 13:21:59.804  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 13:21:59.813  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 13:21:59.848  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 13:22:00.020  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 13:22:00.025  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 13:22:00.027  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 13:22:00.029  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 13:22:00.030  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 13:22:00.031  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 13:22:00.033  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 13:22:00.033  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 13:22:00.732  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 13:22:00.732  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 13:22:01.274  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 13:22:01.274  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 13:22:01.274  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 13:22:01.275  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 13:22:01.312  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 13:22:01.312  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 13:22:01.312  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 13:22:01.446  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 13:22:01.451  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 13:22:01.463  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 13:22:01.480  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 13:22:01.481  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 13:22:01.502  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 13:22:01.647  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 13:22:01.647  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 13:22:01.648  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=37071d41-7584-11ee-8357-0242ac130004] 
2023-10-28 13:22:01.732  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 13:22:01.780  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 13:22:01.791  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 13:22:01.791  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 13:22:01.792  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 13:22:01.793  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 13:22:01.793  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 13:22:01.793  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 13:22:01.794  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 13:22:01.794  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 13:22:01.794  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 13:22:01.794  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /opt/map/mapdata.mbtiles
2023-10-28 13:22:01.891  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 13:22:01.891  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 13:22:01.892  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 13:22:01.892  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 13:22:01.892  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 13:22:01.892  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 13:22:01.893  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 13:22:01.897  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 13:22:01.897  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 13:22:01.900  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 13:22:01.900  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 13:22:01.901  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 13:22:01.901  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 13:22:01.901  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 13:22:01.901  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 13:22:01.905  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 13:22:01.909  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 13:22:01.909  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 13:22:01.980  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 13:22:01.981  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 13:22:02.194  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 13:22:02.260  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@6271e058
2023-10-28 13:22:02.359  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 13:22:02.372  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 13:22:02.373  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 13:22:02.373  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 13:22:02.373  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 13:22:02.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 13:22:02.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 13:22:02.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 13:22:02.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 13:22:02.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 13:22:02.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 13:22:02.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 13:22:02.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 13:22:02.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 13:22:02.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 13:22:02.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 13:22:02.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 13:22:02.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 13:22:02.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 13:22:02.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 13:22:02.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 13:22:02.379  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 13:22:02.379  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 13:22:02.380  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 13:22:02.380  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 13:22:02.380  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 13:22:02.381  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 454ms (build:56ms init:212ms start:186ms)
2023-10-28 13:22:02.382  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 13:22:02.415  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 13:22:02.443  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 13:22:02.443  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 13:22:02.445  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 13:48:06.444  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 13:48:06.503  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 13:48:06.503  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 13:48:06.504  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 13:48:06.506  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 13:48:06.507  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 13:48:06.546  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 13:48:06.548  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 13:48:06.886  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 13:48:06.887  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 13:48:06.887  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 13:48:06.912  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 13:48:06.931  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:06.933  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.023  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.026  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.049  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.050  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.073  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.075  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.089  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.090  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.103  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 13:48:07.113  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.114  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.121  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 13:48:07.121  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 13:48:07.124  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 13:48:07.137  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.140  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.157  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.008s)
2023-10-28 13:48:07.170  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.172  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 13:48:07.327  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 13:48:08.218  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 13:48:08.863  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 13:48:09.730  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 13:48:09.731  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 13:48:09.738  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 13:48:09.926  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 13:48:09.945  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-28 13:48:12.947  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 13:48:13.218  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 13:48:13.221  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 13:48:13.221  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 13:48:13.222  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 13:48:13.247  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 13:48:13.247  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 13:48:13.252  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 13:48:13.261  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 13:48:13.261  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 13:48:13.263  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 13:48:13.263  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 13:48:13.265  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 13:48:13.265  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 13:48:13.266  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 13:48:13.267  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 13:48:13.268  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 13:48:13.268  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 13:48:13.269  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 13:48:13.269  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 13:48:13.270  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 13:48:13.270  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 13:48:13.271  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 13:48:13.272  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 13:48:13.276  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 13:48:13.287  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 13:48:13.288  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 13:48:13.288  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 13:48:13.289  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 13:48:13.291  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 13:48:13.291  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 13:48:13.292  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 13:48:13.293  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 13:48:13.293  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 13:48:13.293  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 13:48:13.294  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 13:48:13.295  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 13:48:13.295  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 13:48:13.296  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 13:48:13.296  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 13:48:13.297  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 13:48:13.297  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 13:48:13.297  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 13:48:13.298  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 13:48:13.299  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 13:48:13.315  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 13:48:13.321  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 13:48:13.328  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 13:48:13.337  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 13:48:13.367  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 13:48:13.527  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 13:48:13.531  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 13:48:13.533  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 13:48:13.534  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 13:48:13.534  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 13:48:13.534  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 13:48:13.536  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 13:48:13.536  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 13:48:14.270  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 13:48:14.270  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 13:48:14.749  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 13:48:14.749  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 13:48:14.750  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 13:48:14.750  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 13:48:14.782  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 13:48:14.782  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 13:48:14.783  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 13:48:14.882  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 13:48:14.886  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 13:48:14.894  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 13:48:14.909  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 13:48:14.910  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 13:48:14.929  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 13:48:15.036  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 13:48:15.037  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 13:48:15.037  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=e0de8c78-7587-11ee-83ff-0242ac130004] 
2023-10-28 13:48:15.116  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 13:48:15.156  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 13:48:15.161  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 13:48:15.162  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 13:48:15.163  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 13:48:15.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 13:48:15.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 13:48:15.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 13:48:15.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 13:48:15.165  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 13:48:15.165  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 13:48:15.165  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 13:48:15.228  SEVERE  [main                          ] org.openremote.manager.map.MapService    : Failed to extract map config from: /deployment/map/mapsettings.json
java.lang.ClassCastException: class com.fasterxml.jackson.databind.node.MissingNode cannot be cast to class com.fasterxml.jackson.databind.node.ObjectNode (com.fasterxml.jackson.databind.node.MissingNode and com.fasterxml.jackson.databind.node.ObjectNode are in unnamed module of loader 'app')
	at org.openremote.manager.map.MapService.loadMapSettingsJson(MapService.java:143)
	at org.openremote.manager.map.MapService.setData(MapService.java:258)
	at org.openremote.manager.map.MapService.start(MapService.java:244)
	at org.openremote.container.Container.start(Container.java:163)
	at org.openremote.container.Container.startBackground(Container.java:207)
	at org.openremote.manager.Main.main(Main.java:31)
2023-10-28 13:48:15.229  WARNING [main                          ] org.openremote.manager.map.MapService    : Map config could not be loaded from '/deployment/map/mapsettings.json', map functionality will not work
2023-10-28 13:48:15.229  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 13:48:15.230  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 13:48:15.230  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 13:48:15.230  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 13:48:15.230  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 13:48:15.231  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 13:48:15.231  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 13:48:15.234  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 13:48:15.235  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 13:48:15.237  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 13:48:15.238  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 13:48:15.238  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 13:48:15.238  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 13:48:15.238  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 13:48:15.239  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 13:48:15.242  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 13:48:15.246  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 13:48:15.246  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 13:48:15.309  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 13:48:15.309  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 13:48:15.438  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 13:48:15.494  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@6e859a10
2023-10-28 13:48:15.581  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 13:48:15.596  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 13:48:15.597  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 13:48:15.597  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 13:48:15.597  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 13:48:15.598  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 13:48:15.598  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 13:48:15.598  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 13:48:15.598  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 13:48:15.599  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 13:48:15.599  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 13:48:15.599  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 13:48:15.599  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 13:48:15.600  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 13:48:15.600  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 13:48:15.600  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 13:48:15.600  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 13:48:15.601  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 13:48:15.601  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 13:48:15.601  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 13:48:15.601  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 13:48:15.602  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 13:48:15.602  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 13:48:15.602  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 13:48:15.602  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 13:48:15.603  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 13:48:15.603  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 364ms (build:72ms init:128ms start:164ms)
2023-10-28 13:48:15.605  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 13:48:15.635  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 13:48:15.661  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 13:48:15.662  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 13:48:15.664  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 14:28:29.289  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 14:28:29.346  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 14:28:29.346  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:28:29.346  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 14:28:29.348  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:28:29.349  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 14:28:29.386  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 14:28:29.387  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 14:28:29.771  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 14:28:29.771  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 14:28:29.772  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 14:28:29.801  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 14:28:29.813  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.814  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.876  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.880  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.912  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.913  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.938  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.938  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.952  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.953  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.965  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 14:28:29.984  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.984  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:29.991  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 14:28:29.991  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 14:28:29.995  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 14:28:30.006  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:30.007  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:30.015  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-28 14:28:30.023  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:30.024  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:28:30.167  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 14:28:31.021  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 14:28:31.867  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 14:28:32.855  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:28:32.856  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 14:28:32.864  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 14:28:33.056  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:28:33.076  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-28 14:28:36.081  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:28:36.323  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 14:28:36.325  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 14:28:36.326  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 14:28:36.326  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:28:36.348  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 14:28:36.349  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:28:36.353  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:28:36.361  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:28:36.361  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:28:36.362  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:28:36.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:28:36.364  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:28:36.364  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:28:36.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 14:28:36.367  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 14:28:36.367  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 14:28:36.367  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 14:28:36.368  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 14:28:36.368  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 14:28:36.369  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 14:28:36.369  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 14:28:36.369  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 14:28:36.370  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 14:28:36.374  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 14:28:36.384  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:28:36.384  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 14:28:36.385  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 14:28:36.386  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 14:28:36.387  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:28:36.387  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:28:36.388  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:28:36.389  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 14:28:36.389  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:28:36.389  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:28:36.391  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:28:36.391  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:28:36.391  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:28:36.392  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:28:36.392  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:28:36.392  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:28:36.392  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:28:36.393  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 14:28:36.393  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 14:28:36.394  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 14:28:36.409  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 14:28:36.415  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:28:36.422  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:28:36.430  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 14:28:36.460  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 14:28:36.614  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 14:28:36.618  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:28:36.619  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:28:36.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:28:36.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:28:36.621  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 14:28:36.622  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 14:28:36.622  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 14:28:37.342  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 14:28:37.343  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 14:28:37.839  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 14:28:37.839  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 14:28:37.840  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 14:28:37.840  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:28:37.872  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 14:28:37.873  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:28:37.873  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:28:37.982  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 14:28:37.986  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 14:28:37.995  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 14:28:38.011  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 14:28:38.012  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 14:28:38.034  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 14:28:38.144  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 14:28:38.144  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 14:28:38.145  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=85261ce0-758d-11ee-bcd1-0242ac130003] 
2023-10-28 14:28:38.224  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 14:28:38.268  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 14:28:38.274  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:28:38.274  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:28:38.275  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:28:38.275  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:28:38.275  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:28:38.275  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:28:38.276  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 14:28:38.276  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:28:38.276  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 14:28:38.276  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 14:28:38.339  SEVERE  [main                          ] org.openremote.manager.map.MapService    : Failed to extract map config from: /deployment/map/mapsettings.json
java.lang.ClassCastException: class com.fasterxml.jackson.databind.node.MissingNode cannot be cast to class com.fasterxml.jackson.databind.node.ObjectNode (com.fasterxml.jackson.databind.node.MissingNode and com.fasterxml.jackson.databind.node.ObjectNode are in unnamed module of loader 'app')
	at org.openremote.manager.map.MapService.loadMapSettingsJson(MapService.java:143)
	at org.openremote.manager.map.MapService.setData(MapService.java:258)
	at org.openremote.manager.map.MapService.start(MapService.java:244)
	at org.openremote.container.Container.start(Container.java:163)
	at org.openremote.container.Container.startBackground(Container.java:207)
	at org.openremote.manager.Main.main(Main.java:31)
2023-10-28 14:28:38.339  WARNING [main                          ] org.openremote.manager.map.MapService    : Map config could not be loaded from '/deployment/map/mapsettings.json', map functionality will not work
2023-10-28 14:28:38.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 14:28:38.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:28:38.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:28:38.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:28:38.340  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 14:28:38.341  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:28:38.341  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:28:38.344  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:28:38.345  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:28:38.347  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:28:38.347  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:28:38.348  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:28:38.348  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:28:38.348  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:28:38.348  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 14:28:38.351  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 14:28:38.355  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 14:28:38.355  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 14:28:38.423  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:28:38.423  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 14:28:38.552  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 14:28:38.606  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@23a24128
2023-10-28 14:28:38.695  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 14:28:38.709  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 14:28:38.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 14:28:38.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 14:28:38.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 14:28:38.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 14:28:38.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 14:28:38.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 14:28:38.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 14:28:38.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 14:28:38.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 14:28:38.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 14:28:38.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 14:28:38.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 14:28:38.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 14:28:38.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:28:38.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 14:28:38.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 14:28:38.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 14:28:38.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 14:28:38.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 14:28:38.715  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 343ms (build:53ms init:128ms start:162ms)
2023-10-28 14:28:38.716  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:28:38.750  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 14:28:38.776  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 14:28:38.777  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:28:38.779  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 14:31:53.887  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 14:31:53.935  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 14:31:53.936  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:31:53.936  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 14:31:53.938  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:31:53.939  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 14:31:53.975  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 14:31:53.975  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 14:31:54.328  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 14:31:54.329  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 14:31:54.330  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 14:31:54.362  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 14:31:54.374  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.381  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.461  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.462  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.484  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.486  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.508  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.510  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.523  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.524  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.535  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 14:31:54.546  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.547  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.552  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 14:31:54.553  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 14:31:54.556  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 14:31:54.566  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.567  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.577  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-28 14:31:54.585  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.585  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:31:54.705  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 14:31:55.541  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 14:31:56.377  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 14:31:57.272  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:31:57.273  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 14:31:57.280  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 14:31:57.492  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:31:57.516  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-28 14:32:00.517  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:32:00.770  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 14:32:00.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 14:32:00.773  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 14:32:00.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:32:00.800  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 14:32:00.800  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:32:00.806  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:32:00.814  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:32:00.815  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:32:00.817  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:32:00.817  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:32:00.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:32:00.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:32:00.820  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 14:32:00.822  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 14:32:00.822  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 14:32:00.823  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 14:32:00.823  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 14:32:00.824  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 14:32:00.824  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 14:32:00.825  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 14:32:00.825  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 14:32:00.826  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 14:32:00.830  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 14:32:00.841  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:32:00.842  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 14:32:00.843  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 14:32:00.843  WARNING [main                          ] org.openremote.manager.map.MapService    : Map settings file not found '/deployment/map/mapsettings.json', falling back to built in map settings
2023-10-28 14:32:00.845  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 14:32:00.846  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:32:00.846  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:32:00.848  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:32:00.849  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 14:32:00.849  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:32:00.849  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:32:00.850  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:32:00.851  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:32:00.851  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:32:00.852  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:32:00.852  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:32:00.853  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:32:00.853  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:32:00.854  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 14:32:00.854  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 14:32:00.855  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 14:32:00.872  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 14:32:00.878  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:32:00.886  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:32:00.895  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 14:32:00.929  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 14:32:01.097  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 14:32:01.101  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:32:01.102  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:32:01.103  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:32:01.103  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:32:01.104  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 14:32:01.105  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 14:32:01.105  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 14:32:01.819  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 14:32:01.820  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 14:32:02.363  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 14:32:02.363  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 14:32:02.364  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 14:32:02.364  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:32:02.404  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 14:32:02.404  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:32:02.404  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:32:02.519  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 14:32:02.524  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 14:32:02.535  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 14:32:02.553  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 14:32:02.554  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 14:32:02.576  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 14:32:02.704  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 14:32:02.704  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 14:32:02.705  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=ff0ffb26-758d-11ee-bd96-0242ac130002] 
2023-10-28 14:32:02.783  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 14:32:02.833  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 14:32:02.840  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:32:02.841  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:32:02.842  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:32:02.842  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:32:02.843  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:32:02.843  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:32:02.844  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 14:32:02.844  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:32:02.844  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 14:32:02.845  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 14:32:02.910  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 14:32:02.911  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:32:02.911  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:32:02.911  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:32:02.911  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 14:32:02.912  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:32:02.912  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:32:02.915  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:32:02.915  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:32:02.918  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:32:02.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:32:02.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:32:02.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:32:02.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:32:02.920  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 14:32:02.925  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 14:32:02.928  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 14:32:02.928  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 14:32:02.993  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:32:02.994  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 14:32:03.123  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 14:32:03.177  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@c45e4d9
2023-10-28 14:32:03.277  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 14:32:03.290  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 14:32:03.291  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 14:32:03.291  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 14:32:03.292  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 14:32:03.292  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 14:32:03.292  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 14:32:03.292  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 14:32:03.293  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 14:32:03.293  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 14:32:03.293  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 14:32:03.294  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:32:03.294  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 14:32:03.294  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 14:32:03.294  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 14:32:03.295  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 14:32:03.295  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 14:32:03.295  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 14:32:03.295  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 14:32:03.296  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 14:32:03.296  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:32:03.296  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 14:32:03.296  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 14:32:03.297  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 14:32:03.297  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 14:32:03.297  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 14:32:03.297  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 377ms (build:76ms init:128ms start:173ms)
2023-10-28 14:32:03.299  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:32:03.332  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 14:32:03.358  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 14:32:03.358  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:32:03.361  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 14:38:40.102  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 14:38:40.173  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 14:38:40.173  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:38:40.174  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 14:38:40.176  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:38:40.176  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 14:38:40.218  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 14:38:40.219  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 14:38:40.600  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 14:38:40.601  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 14:38:40.601  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 14:38:40.631  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 14:38:40.654  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.655  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.737  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.742  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.782  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.782  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.801  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.802  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.815  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.816  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.827  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 14:38:40.837  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.839  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.846  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 14:38:40.847  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 14:38:40.849  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 14:38:40.867  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.867  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.877  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 14:38:40.885  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:40.886  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:38:41.030  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 14:38:41.992  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 14:38:42.695  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 14:38:43.531  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:38:43.531  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 14:38:43.539  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 14:38:43.738  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:38:43.757  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-28 14:38:46.761  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:38:47.029  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 14:38:47.032  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 14:38:47.032  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 14:38:47.032  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:38:47.058  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 14:38:47.059  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:38:47.063  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:38:47.072  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:38:47.073  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:38:47.074  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:38:47.075  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:38:47.076  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:38:47.076  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:38:47.077  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 14:38:47.078  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 14:38:47.079  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 14:38:47.080  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 14:38:47.080  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 14:38:47.080  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 14:38:47.081  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 14:38:47.081  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 14:38:47.082  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 14:38:47.082  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 14:38:47.086  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 14:38:47.097  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:38:47.097  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 14:38:47.098  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 14:38:47.099  WARNING [main                          ] org.openremote.manager.map.MapService    : Map settings file not found '/deployment/map/mapsettings.json', falling back to built in map settings
2023-10-28 14:38:47.099  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 14:38:47.101  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:38:47.101  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:38:47.102  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:38:47.103  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 14:38:47.103  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:38:47.103  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:38:47.104  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:38:47.104  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:38:47.105  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:38:47.105  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:38:47.105  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:38:47.106  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:38:47.106  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:38:47.106  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 14:38:47.106  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 14:38:47.107  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 14:38:47.122  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 14:38:47.129  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:38:47.137  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:38:47.146  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 14:38:47.176  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 14:38:47.338  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 14:38:47.342  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:38:47.343  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:38:47.344  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:38:47.344  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:38:47.344  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 14:38:47.346  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 14:38:47.346  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 14:38:48.023  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 14:38:48.023  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 14:38:48.491  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 14:38:48.492  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 14:38:48.492  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 14:38:48.492  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:38:48.525  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 14:38:48.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:38:48.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:38:48.631  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 14:38:48.634  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 14:38:48.644  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 14:38:48.658  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 14:38:48.659  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 14:38:48.677  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 14:38:48.783  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 14:38:48.783  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 14:38:48.784  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=f11fc168-758e-11ee-904a-0242ac130005] 
2023-10-28 14:38:48.857  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 14:38:48.899  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 14:38:48.905  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:38:48.905  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:38:48.906  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:38:48.906  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:38:48.907  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:38:48.907  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:38:48.907  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 14:38:48.907  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:38:48.908  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 14:38:48.908  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 14:38:48.972  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 14:38:48.974  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:38:48.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:38:48.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:38:48.979  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 14:38:48.980  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:38:48.980  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:38:48.983  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:38:48.984  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:38:48.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:38:48.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:38:48.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:38:48.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:38:48.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:38:48.988  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 14:38:48.991  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 14:38:48.994  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 14:38:48.994  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 14:38:49.055  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:38:49.055  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 14:38:49.186  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 14:38:49.238  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@c45e4d9
2023-10-28 14:38:49.332  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 14:38:49.346  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 14:38:49.346  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 14:38:49.346  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 14:38:49.347  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 14:38:49.347  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 14:38:49.347  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 14:38:49.347  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 14:38:49.347  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 14:38:49.348  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 14:38:49.349  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 14:38:49.349  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 14:38:49.349  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 14:38:49.349  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 14:38:49.350  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 14:38:49.350  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:38:49.350  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 14:38:49.350  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 14:38:49.350  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 14:38:49.351  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 14:38:49.351  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 14:38:49.351  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 351ms (build:57ms init:130ms start:164ms)
2023-10-28 14:38:49.353  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:38:49.383  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 14:38:49.408  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 14:38:49.409  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:38:49.411  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 14:41:35.622  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 14:41:35.656  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 14:41:35.657  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:41:35.657  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 14:41:35.659  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:41:35.659  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 14:41:35.683  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 14:41:35.684  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 14:41:35.884  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 14:41:35.884  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 14:41:35.885  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 14:41:35.904  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 14:41:35.915  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:35.916  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:35.958  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:35.959  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:35.983  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:35.984  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.009  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.010  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.025  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.025  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.036  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 14:41:36.049  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.050  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.054  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 14:41:36.056  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 14:41:36.058  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 14:41:36.070  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.071  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.080  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 14:41:36.089  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.089  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:41:36.180  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 14:41:36.683  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 14:41:37.218  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 14:41:37.992  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:41:37.993  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 14:41:37.998  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 14:41:38.154  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:41:38.291  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 14:41:38.295  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 14:41:38.295  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 14:41:38.295  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:41:38.319  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 14:41:38.320  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:41:38.324  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:41:38.332  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:41:38.333  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:41:38.335  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:41:38.336  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:41:38.337  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:41:38.337  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:41:38.339  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 14:41:38.341  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 14:41:38.341  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 14:41:38.342  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 14:41:38.343  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 14:41:38.343  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 14:41:38.343  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 14:41:38.344  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 14:41:38.345  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 14:41:38.346  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 14:41:38.350  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 14:41:38.360  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:41:38.360  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 14:41:38.361  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 14:41:38.362  WARNING [main                          ] org.openremote.manager.map.MapService    : Map settings file not found '/deployment/map/mapsettings.json', falling back to built in map settings
2023-10-28 14:41:38.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 14:41:38.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:41:38.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:41:38.366  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:41:38.367  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 14:41:38.368  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:41:38.369  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:41:38.370  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:41:38.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:41:38.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:41:38.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:41:38.372  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:41:38.372  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:41:38.373  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:41:38.373  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 14:41:38.374  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 14:41:38.375  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 14:41:38.390  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 14:41:38.396  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:41:38.404  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:41:38.409  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 14:41:38.434  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 14:41:38.584  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 14:41:38.587  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:41:38.588  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:41:38.589  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:41:38.590  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:41:38.590  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 14:41:38.592  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 14:41:38.592  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 14:41:39.186  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 14:41:39.187  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 14:41:39.612  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 14:41:39.613  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 14:41:39.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 14:41:39.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:41:39.643  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 14:41:39.643  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:41:39.643  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:41:39.729  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 14:41:39.732  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 14:41:39.739  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 14:41:39.753  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 14:41:39.754  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 14:41:39.774  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 14:41:39.863  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 14:41:39.863  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 14:41:39.867  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=571b64bb-758f-11ee-9e1c-0242ac130004] 
2023-10-28 14:41:39.936  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 14:41:39.976  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 14:41:39.981  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:41:39.981  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:41:39.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:41:39.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:41:39.983  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:41:39.983  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:41:39.983  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 14:41:39.983  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:41:39.984  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 14:41:39.984  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 14:41:40.042  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 14:41:40.042  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:41:40.043  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:41:40.043  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:41:40.043  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 14:41:40.043  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:41:40.044  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:41:40.047  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:41:40.047  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:41:40.050  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:41:40.050  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:41:40.050  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:41:40.051  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:41:40.051  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:41:40.051  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 14:41:40.055  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 14:41:40.058  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 14:41:40.058  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 14:41:40.118  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:41:40.119  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 14:41:40.227  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 14:41:40.279  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@2efeb5e5
2023-10-28 14:41:40.362  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 14:41:40.373  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 14:41:40.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 14:41:40.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 14:41:40.374  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 14:41:40.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 14:41:40.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 14:41:40.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 14:41:40.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 14:41:40.375  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 14:41:40.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 14:41:40.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:41:40.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 14:41:40.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 14:41:40.376  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 14:41:40.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 14:41:40.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 14:41:40.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 14:41:40.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 14:41:40.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 14:41:40.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:41:40.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 14:41:40.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 14:41:40.378  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 14:41:40.379  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 14:41:40.379  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 14:41:40.379  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 292ms (build:33ms init:108ms start:151ms)
2023-10-28 14:41:40.380  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:41:40.408  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 14:41:40.434  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 14:41:40.434  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:41:40.436  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 14:52:54.043  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 14:52:54.079  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 14:52:54.079  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:52:54.080  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 14:52:54.081  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:52:54.082  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 14:52:54.107  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 14:52:54.108  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 14:52:54.333  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 14:52:54.333  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 14:52:54.334  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 14:52:54.355  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 14:52:54.366  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.367  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.409  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.410  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.427  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.429  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.454  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.456  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.472  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.473  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.484  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 14:52:54.500  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.501  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.506  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 14:52:54.507  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 14:52:54.510  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 14:52:54.522  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.523  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.534  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 14:52:54.542  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.543  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 14:52:54.639  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 14:52:55.179  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 14:52:55.723  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 14:52:56.497  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:52:56.497  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 14:52:56.503  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 14:52:56.679  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 14:52:56.840  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 14:52:56.842  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 14:52:56.843  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 14:52:56.843  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:52:56.866  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 14:52:56.866  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:52:56.872  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:52:56.878  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:52:56.879  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:52:56.881  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:52:56.881  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:52:56.882  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:52:56.883  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:52:56.884  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 14:52:56.886  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 14:52:56.887  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 14:52:56.888  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 14:52:56.888  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 14:52:56.889  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 14:52:56.889  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 14:52:56.890  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 14:52:56.890  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 14:52:56.891  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 14:52:56.892  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 14:52:56.903  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:52:56.904  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 14:52:56.904  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 14:52:56.905  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 14:52:56.907  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:52:56.907  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:52:56.908  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:52:56.909  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 14:52:56.910  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:52:56.910  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:52:56.911  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:52:56.911  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:52:56.912  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:52:56.912  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:52:56.912  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:52:56.913  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:52:56.914  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:52:56.914  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 14:52:56.914  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 14:52:56.915  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 14:52:56.928  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 14:52:56.934  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:52:56.941  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:52:56.946  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 14:52:56.969  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 14:52:57.118  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 14:52:57.121  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:52:57.124  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 14:52:57.125  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 14:52:57.125  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 14:52:57.125  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 14:52:57.127  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 14:52:57.127  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 14:52:57.728  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 14:52:57.728  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 14:52:58.186  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 14:52:58.186  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 14:52:58.187  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 14:52:58.187  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 14:52:58.220  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 14:52:58.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 14:52:58.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 14:52:58.314  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 14:52:58.317  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 14:52:58.325  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 14:52:58.339  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 14:52:58.340  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 14:52:58.358  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 14:52:58.442  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 14:52:58.442  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 14:52:58.443  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=eb9317a2-7590-11ee-9112-0242ac130004] 
2023-10-28 14:52:58.508  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 14:52:58.546  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 14:52:58.550  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 14:52:58.550  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 14:52:58.551  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 14:52:58.552  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 14:52:58.552  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 14:52:58.553  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 14:52:58.554  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 14:52:58.555  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 14:52:58.555  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 14:52:58.555  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 14:52:58.612  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 14:52:58.612  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 14:52:58.612  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 14:52:58.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 14:52:58.613  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 14:52:58.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 14:52:58.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 14:52:58.616  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 14:52:58.617  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 14:52:58.619  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 14:52:58.619  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 14:52:58.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 14:52:58.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 14:52:58.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 14:52:58.620  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 14:52:58.624  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 14:52:58.627  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 14:52:58.627  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 14:52:58.682  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 14:52:58.683  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 14:52:58.797  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 14:52:58.844  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@4c3316bb
2023-10-28 14:52:58.922  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 14:52:58.933  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 14:52:58.934  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 14:52:58.934  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 14:52:58.934  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 14:52:58.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 14:52:58.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 14:52:58.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 14:52:58.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 14:52:58.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 14:52:58.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 14:52:58.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:52:58.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 14:52:58.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 14:52:58.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 14:52:58.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 14:52:58.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 14:52:58.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 14:52:58.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 14:52:58.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 14:52:58.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 14:52:58.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 14:52:58.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 14:52:58.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 14:52:58.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 14:52:58.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 14:52:58.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 288ms (build:33ms init:114ms start:141ms)
2023-10-28 14:52:58.941  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 14:52:58.966  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 14:52:58.989  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 14:52:58.990  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 14:52:58.992  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:06:13.392  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:06:13.444  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:06:13.445  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:06:13.445  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:06:13.447  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:06:13.447  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:06:13.482  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:06:13.483  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:06:13.898  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:06:13.898  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:06:13.899  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:06:13.931  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:06:13.946  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:13.947  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.026  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.026  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.060  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.066  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.107  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.109  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.128  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.129  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.142  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.007s)
2023-10-28 15:06:14.158  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.159  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.167  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:06:14.168  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:06:14.173  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:06:14.206  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.208  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.224  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.011s)
2023-10-28 15:06:14.238  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.242  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:06:14.407  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:06:15.263  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:06:16.069  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:06:16.937  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:06:16.938  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:06:16.944  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:06:17.134  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:06:17.156  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-28 15:06:20.162  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:06:20.391  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:06:20.394  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:06:20.395  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:06:20.395  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:06:20.417  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:06:20.418  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:06:20.423  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:06:20.431  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:06:20.432  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:06:20.435  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:06:20.435  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:06:20.437  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:06:20.437  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:06:20.439  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:06:20.440  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:06:20.441  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:06:20.442  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:06:20.442  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:06:20.443  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:06:20.443  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:06:20.444  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:06:20.444  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:06:20.446  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:06:20.450  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:06:20.462  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:06:20.463  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:06:20.463  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:06:20.464  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:06:20.466  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:06:20.467  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:06:20.468  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:06:20.469  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:06:20.469  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:06:20.469  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:06:20.470  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:06:20.471  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:06:20.471  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:06:20.472  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:06:20.472  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:06:20.473  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:06:20.473  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:06:20.474  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:06:20.474  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:06:20.475  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:06:20.492  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:06:20.498  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:06:20.507  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:06:20.517  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 15:06:20.546  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:06:20.703  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:06:20.709  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:06:20.710  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:06:20.711  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:06:20.711  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:06:20.712  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:06:20.713  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:06:20.713  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:06:21.384  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:06:21.385  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:06:21.907  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:06:21.908  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 15:06:21.908  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:06:21.909  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:06:21.942  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:06:21.943  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:06:21.943  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:06:22.053  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:06:22.058  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:06:22.066  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:06:22.085  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:06:22.086  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:06:22.109  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:06:22.224  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:06:22.225  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:06:22.225  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=caa41598-7592-11ee-996b-0242ac130003] 
2023-10-28 15:06:22.306  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:06:22.352  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:06:22.359  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:06:22.359  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:06:22.360  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:06:22.360  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:06:22.361  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:06:22.361  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:06:22.361  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:06:22.362  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:06:22.362  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:06:22.362  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:06:22.429  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:06:22.429  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:06:22.429  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:06:22.430  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:06:22.430  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:06:22.430  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:06:22.430  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:06:22.434  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:06:22.434  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:06:22.436  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:06:22.437  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:06:22.437  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:06:22.437  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:06:22.437  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:06:22.438  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:06:22.441  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:06:22.444  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:06:22.445  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:06:22.508  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:06:22.509  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:06:22.636  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:06:22.687  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@1dfede32
2023-10-28 15:06:22.775  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:06:22.787  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:06:22.787  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:06:22.787  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:06:22.788  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:06:22.788  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:06:22.788  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:06:22.789  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:06:22.789  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:06:22.789  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:06:22.789  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:06:22.790  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:06:22.790  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:06:22.790  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:06:22.790  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:06:22.791  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:06:22.791  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:06:22.791  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:06:22.791  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:06:22.791  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:06:22.792  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:06:22.792  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:06:22.792  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:06:22.792  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:06:22.793  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:06:22.793  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:06:22.793  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 338ms (build:56ms init:126ms start:156ms)
2023-10-28 15:06:22.794  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:06:22.826  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:06:22.851  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:06:22.851  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:06:22.853  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:09:49.419  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:09:49.455  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:09:49.456  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:09:49.456  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:09:49.457  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:09:49.458  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:09:49.482  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:09:49.483  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:09:49.699  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:09:49.699  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:09:49.700  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:09:49.719  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:09:49.731  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.732  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.779  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.780  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.805  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.806  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.836  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.839  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.857  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.858  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.875  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.010s)
2023-10-28 15:09:49.889  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.890  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.894  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:09:49.896  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:09:49.897  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:09:49.908  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.908  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.917  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-28 15:09:49.926  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:49.927  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:09:50.016  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:09:50.543  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:09:51.059  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:09:51.816  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:09:51.817  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:09:51.824  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:09:51.997  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:09:52.139  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:09:52.141  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:09:52.141  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:09:52.142  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:09:52.162  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:09:52.163  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:09:52.167  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:09:52.175  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:09:52.176  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:09:52.178  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:09:52.178  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:09:52.180  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:09:52.180  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:09:52.183  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:09:52.184  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:09:52.185  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:09:52.185  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:09:52.186  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:09:52.187  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:09:52.188  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:09:52.188  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:09:52.189  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:09:52.190  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:09:52.191  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:09:52.203  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:09:52.204  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:09:52.205  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:09:52.206  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:09:52.207  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:09:52.207  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:09:52.209  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:09:52.210  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:09:52.210  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:09:52.210  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:09:52.212  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:09:52.212  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:09:52.213  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:09:52.213  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:09:52.213  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:09:52.214  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:09:52.214  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:09:52.215  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:09:52.215  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:09:52.216  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:09:52.232  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:09:52.238  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:09:52.246  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:09:52.252  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 15:09:52.276  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:09:52.420  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:09:52.423  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:09:52.424  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:09:52.425  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:09:52.425  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:09:52.426  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:09:52.427  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:09:52.427  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:09:53.014  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:09:53.014  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:09:53.463  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:09:53.463  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 15:09:53.463  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:09:53.464  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:09:53.495  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:09:53.495  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:09:53.496  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:09:53.580  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:09:53.584  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:09:53.592  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:09:53.606  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:09:53.607  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:09:53.627  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:09:53.717  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:09:53.718  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:09:53.718  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=48b88a94-7593-11ee-b304-0242ac130004] 
2023-10-28 15:09:53.783  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:09:53.823  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:09:53.828  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:09:53.829  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:09:53.830  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:09:53.830  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:09:53.831  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:09:53.831  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:09:53.831  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:09:53.831  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:09:53.832  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:09:53.832  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:09:53.889  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:09:53.890  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:09:53.890  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:09:53.890  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:09:53.891  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:09:53.891  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:09:53.891  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:09:53.894  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:09:53.894  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:09:53.897  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:09:53.897  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:09:53.897  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:09:53.898  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:09:53.898  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:09:53.898  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:09:53.902  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:09:53.904  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:09:53.905  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:09:53.964  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:09:53.964  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:09:54.077  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:09:54.126  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@4c3316bb
2023-10-28 15:09:54.208  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:09:54.220  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:09:54.220  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:09:54.221  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:09:54.221  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:09:54.221  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:09:54.221  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:09:54.222  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:09:54.222  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:09:54.222  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:09:54.223  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:09:54.223  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:09:54.223  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:09:54.224  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:09:54.224  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:09:54.224  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:09:54.225  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:09:54.225  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:09:54.225  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:09:54.226  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:09:54.226  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:09:54.227  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:09:54.228  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:09:54.228  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:09:54.228  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:09:54.228  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:09:54.229  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 296ms (build:34ms init:112ms start:150ms)
2023-10-28 15:09:54.230  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:09:54.258  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:09:54.282  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:09:54.283  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:09:54.285  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:11:25.945  INFO    [Thread-0                      ] org.openremote.container.Container       : <<< Stopping runtime container...
2023-10-28 15:15:02.168  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:15:02.204  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:15:02.205  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:15:02.205  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:15:02.207  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:15:02.207  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:15:02.233  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:15:02.233  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:15:02.444  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:15:02.445  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:15:02.445  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:15:02.463  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:15:02.475  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.476  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.521  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.523  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.556  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.558  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.583  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.585  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.602  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.603  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.613  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 15:15:02.628  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.629  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.633  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:15:02.634  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:15:02.636  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:15:02.647  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.648  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.658  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 15:15:02.666  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.667  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:15:02.759  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:15:03.265  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:15:03.786  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:15:04.531  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:15:04.532  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:15:04.537  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:15:04.701  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:15:04.844  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:15:04.847  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:15:04.848  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:15:04.848  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:15:04.872  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:15:04.872  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:15:04.877  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:15:04.885  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:15:04.886  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:15:04.888  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:15:04.888  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:15:04.889  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:15:04.890  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:15:04.891  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:15:04.893  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:15:04.894  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:15:04.894  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:15:04.895  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:15:04.896  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:15:04.896  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:15:04.897  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:15:04.898  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:15:04.899  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:15:04.902  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:15:04.912  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:15:04.913  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:15:04.913  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:15:04.914  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:15:04.916  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:15:04.917  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:15:04.918  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:15:04.919  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:15:04.919  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:15:04.920  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:15:04.921  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:15:04.921  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:15:04.922  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:15:04.922  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:15:04.922  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:15:04.923  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:15:04.923  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:15:04.924  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:15:04.924  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:15:04.925  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:15:04.939  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:15:04.946  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:15:04.954  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:15:04.959  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 15:15:04.986  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:15:05.125  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:15:05.128  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:15:05.129  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:15:05.130  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:15:05.130  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:15:05.131  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:15:05.132  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:15:05.133  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:15:05.729  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:15:05.729  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:15:06.171  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:15:06.171  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 15:15:06.172  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:15:06.172  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:15:06.202  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:15:06.203  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:15:06.203  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:15:06.285  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:15:06.288  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:15:06.295  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:15:06.308  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:15:06.309  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:15:06.330  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:15:06.420  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:15:06.421  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:15:06.421  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=031b8a1b-7594-11ee-bed2-0242ac130004] 
2023-10-28 15:15:06.490  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:15:06.530  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:15:06.535  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:15:06.535  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:15:06.536  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:15:06.537  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:15:06.538  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:15:06.538  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:15:06.539  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:15:06.539  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:15:06.539  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:15:06.539  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:15:06.598  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:15:06.598  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:15:06.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:15:06.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:15:06.599  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:15:06.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:15:06.600  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:15:06.603  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:15:06.603  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:15:06.605  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:15:06.606  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:15:06.606  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:15:06.606  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:15:06.606  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:15:06.607  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:15:06.610  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:15:06.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:15:06.614  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:15:06.671  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:15:06.672  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:15:06.779  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:15:06.831  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@4340786
2023-10-28 15:15:06.912  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:15:06.930  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:15:06.931  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:15:06.931  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:15:06.932  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:15:06.932  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:15:06.932  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:15:06.933  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:15:06.933  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:15:06.933  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:15:06.934  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:15:06.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:15:06.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:15:06.935  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:15:06.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:15:06.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:15:06.936  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:15:06.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:15:06.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:15:06.937  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:15:06.938  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:15:06.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:15:06.939  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:15:06.941  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:15:06.941  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:15:06.941  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:15:06.941  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 301ms (build:33ms init:107ms start:161ms)
2023-10-28 15:15:06.943  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:15:06.978  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:15:07.001  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:15:07.002  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:15:07.004  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:21:15.062  INFO    [Thread-0                      ] org.openremote.container.Container       : <<< Stopping runtime container...
2023-10-28 15:23:25.268  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:23:25.307  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:23:25.308  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:23:25.309  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:23:25.311  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:23:25.312  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:23:25.338  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:23:25.338  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:23:25.568  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:23:25.569  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:23:25.569  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:23:25.591  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:23:25.605  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.606  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.657  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.658  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.682  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.684  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.710  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.711  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.727  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.728  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.741  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 15:23:25.757  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.758  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.763  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:23:25.764  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:23:25.766  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:23:25.780  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.781  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.791  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 15:23:25.800  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.801  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:23:25.910  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:23:26.490  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:23:27.129  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:23:27.990  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:23:27.990  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:23:27.997  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:23:28.184  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:23:28.335  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:23:28.338  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:23:28.339  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:23:28.339  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:23:28.362  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:23:28.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:23:28.367  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:23:28.375  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:23:28.376  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:23:28.378  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:23:28.378  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:23:28.380  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:23:28.380  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:23:28.382  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:23:28.384  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:23:28.385  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:23:28.385  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:23:28.386  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:23:28.386  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:23:28.387  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:23:28.387  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:23:28.388  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:23:28.389  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:23:28.394  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:23:28.406  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:23:28.407  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:23:28.408  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:23:28.409  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:23:28.410  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:23:28.411  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:23:28.412  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:23:28.414  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:23:28.414  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:23:28.414  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:23:28.416  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:23:28.417  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:23:28.417  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:23:28.418  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:23:28.418  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:23:28.419  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:23:28.419  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:23:28.420  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:23:28.420  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:23:28.421  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:23:28.438  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:23:28.447  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:23:28.455  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:23:28.461  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 15:23:28.488  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:23:28.654  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:23:28.658  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:23:28.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:23:28.661  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:23:28.661  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:23:28.662  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:23:28.664  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:23:28.664  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:23:29.351  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:23:29.352  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:23:29.838  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:23:29.839  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 15:23:29.839  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:23:29.840  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:23:29.872  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:23:29.873  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:23:29.873  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:23:29.975  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:23:29.979  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:23:29.987  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:23:30.002  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:23:30.003  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:23:30.025  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:23:30.136  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:23:30.137  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:23:30.138  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=2f546151-7595-11ee-8c80-0242ac130004] 
2023-10-28 15:23:30.216  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:23:30.260  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:23:30.265  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:23:30.266  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:23:30.266  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:23:30.267  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:23:30.267  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:23:30.268  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:23:30.268  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:23:30.268  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:23:30.268  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:23:30.269  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:23:30.331  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:23:30.331  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:23:30.332  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:23:30.332  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:23:30.332  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:23:30.333  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:23:30.333  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:23:30.336  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:23:30.336  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:23:30.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:23:30.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:23:30.340  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:23:30.341  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:23:30.341  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:23:30.341  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:23:30.345  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:23:30.350  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:23:30.350  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:23:30.420  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:23:30.420  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:23:30.550  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:23:30.607  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@4340786
2023-10-28 15:23:30.696  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:23:30.709  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:23:30.709  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:23:30.709  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:23:30.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:23:30.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:23:30.710  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:23:30.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:23:30.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:23:30.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:23:30.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:23:30.711  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:23:30.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:23:30.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:23:30.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:23:30.712  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:23:30.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:23:30.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:23:30.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:23:30.713  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:23:30.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:23:30.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:23:30.714  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:23:30.715  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:23:30.715  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:23:30.715  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:23:30.716  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 331ms (build:37ms init:129ms start:165ms)
2023-10-28 15:23:30.717  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:23:30.751  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:23:30.780  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:23:30.781  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:23:30.783  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:27:08.901  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:27:08.939  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:27:08.939  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:27:08.940  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:27:08.942  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:27:08.942  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:27:08.968  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:27:08.969  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:27:09.219  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:27:09.219  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:27:09.220  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:27:09.245  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:27:09.260  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.262  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.318  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.319  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.429  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.436  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.488  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.497  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.534  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.537  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.555  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.011s)
2023-10-28 15:27:09.581  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.584  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.589  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:27:09.590  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:27:09.593  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:27:09.605  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.606  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.615  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-28 15:27:09.626  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.627  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:27:09.726  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:27:10.267  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:27:10.822  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:27:11.556  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:27:11.557  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:27:11.564  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:27:11.730  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:27:11.868  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:27:11.871  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:27:11.871  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:27:11.872  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:27:11.891  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:27:11.892  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:27:11.896  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:27:11.902  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:27:11.903  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:27:11.905  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:27:11.905  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:27:11.907  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:27:11.907  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:27:11.908  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:27:11.910  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:27:11.911  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:27:11.911  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:27:11.912  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:27:11.913  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:27:11.914  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:27:11.914  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:27:11.915  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:27:11.916  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:27:11.917  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:27:11.929  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:27:11.930  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:27:11.930  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:27:11.932  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:27:11.933  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:27:11.933  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:27:11.934  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:27:11.935  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:27:11.935  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:27:11.936  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:27:11.937  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:27:11.937  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:27:11.938  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:27:11.938  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:27:11.938  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:27:11.939  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:27:11.939  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:27:11.940  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:27:11.940  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:27:11.941  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:27:11.956  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:27:11.963  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:27:11.972  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:27:11.978  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): 
2023-10-28 15:27:12.006  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:27:12.159  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:27:12.163  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:27:12.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:27:12.165  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:27:12.166  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:27:12.166  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:27:12.168  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:27:12.168  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:27:12.763  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:27:12.763  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:27:13.199  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Failed to write OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:27:13.199  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Failed to generate stored credentials will continue using OR_ADMIN_PASSWORD
2023-10-28 15:27:13.199  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:27:13.200  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:27:13.228  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:27:13.229  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:27:13.229  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:27:13.315  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:27:13.319  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:27:13.326  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:27:13.340  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:27:13.341  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:27:13.363  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:27:13.464  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:27:13.465  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:27:13.466  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=b473835b-7595-11ee-8ec7-0242ac130004] 
2023-10-28 15:27:13.541  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:27:13.580  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:27:13.584  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:27:13.584  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:27:13.585  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:27:13.586  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:27:13.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:27:13.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:27:13.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:27:13.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:27:13.588  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:27:13.588  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:27:13.645  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:27:13.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:27:13.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:27:13.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:27:13.646  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:27:13.647  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:27:13.647  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:27:13.650  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:27:13.650  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:27:13.653  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:27:13.653  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:27:13.653  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:27:13.654  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:27:13.654  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:27:13.654  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:27:13.658  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:27:13.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:27:13.661  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:27:13.719  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:27:13.719  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:27:13.828  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:27:13.874  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@19c38153
2023-10-28 15:27:13.951  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:27:13.967  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:27:13.968  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:27:13.968  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:27:13.968  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:27:13.968  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:27:13.969  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:27:13.969  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:27:13.969  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:27:13.970  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:27:13.970  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:27:13.971  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:27:13.971  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:27:13.971  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:27:13.971  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:27:13.972  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:27:13.972  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:27:13.972  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:27:13.972  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:27:13.973  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:27:13.973  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:27:13.974  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:27:13.974  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:27:13.975  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:27:13.975  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:27:13.975  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:27:13.975  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 291ms (build:37ms init:108ms start:146ms)
2023-10-28 15:27:13.977  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:27:14.006  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:27:14.032  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:27:14.033  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:27:14.036  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:30:46.836  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:30:46.872  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:30:46.873  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:30:46.873  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:30:46.875  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:30:46.875  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:30:46.899  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:30:46.900  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:30:47.108  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:30:47.109  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:30:47.109  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:30:47.128  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:30:47.140  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.141  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.185  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.186  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.203  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.204  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.236  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.237  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.251  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.252  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.263  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-28 15:30:47.276  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.277  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.282  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:30:47.283  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:30:47.285  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:30:47.298  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.299  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.308  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-28 15:30:47.316  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.317  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:30:47.407  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:30:47.906  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:30:48.465  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:30:49.235  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:30:49.237  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:30:49.244  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:30:49.406  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:30:49.556  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:30:49.559  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:30:49.559  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:30:49.560  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:30:49.580  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:30:49.580  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:30:49.585  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:30:49.592  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:30:49.593  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:30:49.595  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:30:49.595  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:30:49.597  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:30:49.597  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:30:49.600  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:30:49.601  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:30:49.602  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:30:49.603  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:30:49.603  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:30:49.604  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:30:49.604  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:30:49.605  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:30:49.605  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:30:49.606  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:30:49.610  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:30:49.621  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:30:49.622  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:30:49.623  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:30:49.624  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:30:49.626  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:30:49.627  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:30:49.638  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:30:49.680  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:30:49.681  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:30:49.681  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:30:49.681  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:30:49.682  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:30:49.683  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:30:49.683  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:30:49.683  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:30:49.684  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:30:49.684  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:30:49.685  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:30:49.685  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:30:49.685  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:30:49.686  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:30:49.702  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:30:49.709  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:30:49.717  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:30:49.722  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-28 15:30:49.742  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:30:49.849  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:30:49.851  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:30:49.852  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:30:49.854  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:30:49.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:30:49.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:30:49.856  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : No stored credentials so using OR_ADMIN_PASSWORD
2023-10-28 15:30:49.857  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:30:49.858  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:30:50.497  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:30:50.497  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : OR_ADMIN_PASSWORD credentials are valid so creating/recreating stored credentials
2023-10-28 15:30:50.920  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Stored credentials successfully generated so using them
2023-10-28 15:30:50.921  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:30:50.921  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:30:50.974  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:30:50.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:30:50.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:30:51.012  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:30:51.012  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:30:51.013  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:30:51.093  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:30:51.096  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:30:51.103  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:30:51.117  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:30:51.118  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:30:51.138  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:30:51.228  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:30:51.229  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:30:51.229  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=3641cc45-7596-11ee-bd66-0242ac130004] 
2023-10-28 15:30:51.298  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:30:51.338  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:30:51.342  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:30:51.343  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:30:51.344  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:30:51.344  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:30:51.345  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:30:51.345  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:30:51.345  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:30:51.346  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:30:51.346  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:30:51.346  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:30:51.404  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:30:51.404  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:30:51.405  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:30:51.405  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:30:51.405  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:30:51.405  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:30:51.406  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:30:51.409  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:30:51.410  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:30:51.412  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:30:51.412  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:30:51.413  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:30:51.413  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:30:51.413  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:30:51.413  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:30:51.417  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:30:51.420  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:30:51.420  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:30:51.483  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:30:51.483  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:30:51.595  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:30:51.643  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@5cc205a9
2023-10-28 15:30:51.724  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:30:51.738  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:30:51.738  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:30:51.739  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:30:51.739  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:30:51.739  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:30:51.739  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:30:51.740  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:30:51.740  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:30:51.740  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:30:51.741  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:30:51.741  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:30:51.741  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:30:51.741  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:30:51.741  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:30:51.742  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:30:51.743  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:30:51.743  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:30:51.743  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:30:51.743  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:30:51.744  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:30:51.744  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:30:51.744  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:30:51.745  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:30:51.745  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:30:51.745  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:30:51.745  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 295ms (build:35ms init:111ms start:149ms)
2023-10-28 15:30:51.748  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:30:51.777  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:30:51.799  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:30:51.800  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:30:51.804  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:44:05.979  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:44:06.018  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:44:06.019  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:44:06.019  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:44:06.021  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:44:06.021  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:44:06.046  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:44:06.047  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:44:06.259  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:44:06.259  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:44:06.260  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:44:06.279  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:44:06.291  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.292  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.335  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.336  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.357  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.358  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.375  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.376  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.391  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.392  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.404  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.007s)
2023-10-28 15:44:06.416  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.417  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.421  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:44:06.422  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:44:06.425  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:44:06.436  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.440  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.449  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 15:44:06.457  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.458  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:44:06.548  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:44:07.054  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:44:07.589  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:44:08.350  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:44:08.351  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:44:08.356  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:44:08.514  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:44:08.658  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:44:08.662  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:44:08.663  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:44:08.664  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:44:08.685  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:44:08.685  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:44:08.690  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:44:08.697  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:44:08.698  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:44:08.699  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:44:08.700  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:44:08.701  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:44:08.702  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:44:08.703  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:44:08.705  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:44:08.706  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:44:08.706  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:44:08.707  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:44:08.708  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:44:08.708  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:44:08.709  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:44:08.710  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:44:08.711  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:44:08.715  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:44:08.725  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:44:08.727  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:44:08.727  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:44:08.728  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:44:08.729  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:44:08.730  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:44:08.741  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:44:08.783  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:44:08.784  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:44:08.784  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:44:08.784  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:44:08.785  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:44:08.786  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:44:08.786  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:44:08.787  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:44:08.787  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:44:08.787  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:44:08.788  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:44:08.788  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:44:08.788  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:44:08.790  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:44:08.805  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:44:08.812  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:44:08.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:44:08.825  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-28 15:44:08.848  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:44:08.963  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:44:08.964  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:44:08.966  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:44:08.967  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:44:08.968  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:44:08.969  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:44:08.969  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:44:09.004  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-28 15:44:09.006  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:44:09.006  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:44:09.575  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:44:09.575  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:44:09.576  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:44:09.645  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:44:09.645  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:44:09.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:44:09.726  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:44:09.729  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:44:09.736  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:44:09.748  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:44:09.749  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:44:09.769  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:44:09.861  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:44:09.862  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:44:09.862  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=1247866a-7598-11ee-9d5e-0242ac130004] 
2023-10-28 15:44:09.927  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:44:09.975  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:44:09.979  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:44:09.980  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:44:09.980  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:44:09.981  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:44:09.981  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:44:09.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:44:09.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:44:09.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:44:09.982  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:44:09.982  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:44:10.039  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:44:10.039  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:44:10.040  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:44:10.040  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:44:10.040  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:44:10.040  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:44:10.041  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:44:10.160  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:44:10.160  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:44:10.163  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:44:10.163  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:44:10.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:44:10.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:44:10.164  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:44:10.165  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:44:10.169  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:44:10.173  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:44:10.173  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:44:10.260  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:44:10.260  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:44:10.377  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:44:10.425  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@194f5558
2023-10-28 15:44:10.513  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:44:10.536  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:44:10.537  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:44:10.537  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:44:10.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:44:10.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:44:10.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:44:10.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:44:10.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:44:10.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:44:10.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:44:10.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:44:10.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:44:10.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:44:10.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:44:10.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:44:10.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:44:10.542  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:44:10.542  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:44:10.542  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:44:10.542  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:44:10.543  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:44:10.543  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:44:10.544  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:44:10.544  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:44:10.544  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:44:10.544  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 314ms (build:32ms init:115ms start:167ms)
2023-10-28 15:44:10.546  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:44:10.577  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:44:10.608  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:44:10.609  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:44:10.611  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:52:53.038  INFO    [WebService task-4             ] org.openremote.container.web.WebService  : Saving manager_config.json..
2023-10-28 15:58:39.514  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-28 15:58:39.550  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-28 15:58:39.550  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:58:39.551  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-28 15:58:39.552  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:58:39.553  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-28 15:58:39.574  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-28 15:58:39.574  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-28 15:58:39.794  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-28 15:58:39.795  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-28 15:58:39.796  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-28 15:58:39.816  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-28 15:58:39.828  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.829  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.871  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.873  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.888  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.889  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.911  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.912  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.926  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.927  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.938  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 15:58:39.950  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.951  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.955  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-28 15:58:39.956  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-28 15:58:39.958  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-28 15:58:39.969  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.970  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.979  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-28 15:58:39.988  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:39.989  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-28 15:58:40.084  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-28 15:58:40.610  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-28 15:58:41.174  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-28 15:58:41.955  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:58:41.956  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-28 15:58:41.961  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-28 15:58:42.122  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-28 15:58:42.277  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-28 15:58:42.280  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-28 15:58:42.281  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-28 15:58:42.281  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:58:42.301  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-28 15:58:42.301  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:58:42.305  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:58:42.313  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:58:42.314  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:58:42.315  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:58:42.316  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:58:42.317  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:58:42.318  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:58:42.319  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-28 15:58:42.321  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-28 15:58:42.321  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-28 15:58:42.322  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-28 15:58:42.323  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-28 15:58:42.323  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-28 15:58:42.323  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-28 15:58:42.324  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-28 15:58:42.324  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-28 15:58:42.325  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-28 15:58:42.327  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-28 15:58:42.345  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:58:42.346  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-28 15:58:42.347  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-28 15:58:42.348  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-28 15:58:42.350  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:58:42.351  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:58:42.363  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:58:42.407  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:58:42.408  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-28 15:58:42.408  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:58:42.409  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:58:42.410  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:58:42.410  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:58:42.411  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:58:42.411  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:58:42.411  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:58:42.412  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:58:42.412  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:58:42.413  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-28 15:58:42.413  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-28 15:58:42.414  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-28 15:58:42.428  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-28 15:58:42.434  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:58:42.443  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:58:42.448  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-28 15:58:42.467  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-28 15:58:42.590  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:58:42.591  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-28 15:58:42.593  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:58:42.595  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-28 15:58:42.596  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-28 15:58:42.596  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-28 15:58:42.597  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-28 15:58:42.631  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-28 15:58:42.633  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-28 15:58:42.633  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-28 15:58:43.220  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-28 15:58:43.220  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-28 15:58:43.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-28 15:58:43.297  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-28 15:58:43.297  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-28 15:58:43.297  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-28 15:58:43.383  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-28 15:58:43.387  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-28 15:58:43.395  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-28 15:58:43.410  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-28 15:58:43.410  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-28 15:58:43.430  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-28 15:58:43.533  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-28 15:58:43.534  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-28 15:58:43.535  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=1b0500d9-759a-11ee-8d60-0242ac130004] 
2023-10-28 15:58:43.604  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-28 15:58:43.653  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-28 15:58:43.658  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-28 15:58:43.658  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-28 15:58:43.658  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-28 15:58:43.659  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-28 15:58:43.659  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-28 15:58:43.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-28 15:58:43.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-28 15:58:43.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-28 15:58:43.660  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-28 15:58:43.661  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-28 15:58:43.719  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-28 15:58:43.719  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-28 15:58:43.719  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-28 15:58:43.720  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-28 15:58:43.720  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-28 15:58:43.720  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-28 15:58:43.720  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-28 15:58:43.850  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-28 15:58:43.851  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-28 15:58:43.854  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-28 15:58:43.854  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-28 15:58:43.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-28 15:58:43.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-28 15:58:43.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-28 15:58:43.855  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-28 15:58:43.860  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-28 15:58:43.865  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-28 15:58:43.865  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-28 15:58:43.954  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-28 15:58:43.955  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-28 15:58:44.101  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-28 15:58:44.157  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@5494539a
2023-10-28 15:58:44.244  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-28 15:58:44.255  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-28 15:58:44.256  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-28 15:58:44.256  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-28 15:58:44.256  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-28 15:58:44.256  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-28 15:58:44.256  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-28 15:58:44.257  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-28 15:58:44.257  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-28 15:58:44.257  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-28 15:58:44.258  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-28 15:58:44.258  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:58:44.258  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-28 15:58:44.258  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-28 15:58:44.258  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-28 15:58:44.259  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-28 15:58:44.259  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-28 15:58:44.259  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-28 15:58:44.259  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-28 15:58:44.259  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-28 15:58:44.260  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-28 15:58:44.260  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-28 15:58:44.261  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-28 15:58:44.261  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-28 15:58:44.261  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-28 15:58:44.261  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-28 15:58:44.262  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 337ms (build:32ms init:145ms start:160ms)
2023-10-28 15:58:44.264  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-28 15:58:44.296  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-28 15:58:44.318  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-28 15:58:44.318  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-28 15:58:44.320  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-28 15:59:35.550  INFO    [Thread-0                      ] org.openremote.container.Container       : <<< Stopping runtime container...
2023-10-29 12:32:33.820  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-29 12:32:33.879  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-29 12:32:33.879  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:32:33.880  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-29 12:32:33.882  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:32:33.883  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-29 12:32:33.923  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-29 12:32:33.924  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-29 12:32:34.263  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-29 12:32:34.264  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-29 12:32:34.265  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-29 12:32:34.293  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-29 12:32:34.307  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.309  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.383  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.385  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.408  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.409  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.431  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.431  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.448  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.451  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.461  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-29 12:32:34.476  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.477  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.484  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-29 12:32:34.486  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-29 12:32:34.489  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-29 12:32:34.510  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.512  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.524  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-29 12:32:34.533  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.534  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:32:34.679  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-29 12:32:35.469  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-29 12:32:36.271  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-29 12:32:37.163  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:32:37.163  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-29 12:32:37.170  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-29 12:32:37.355  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:32:37.377  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-29 12:32:40.381  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:32:40.577  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-29 12:32:40.580  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-29 12:32:40.581  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-29 12:32:40.581  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:32:40.609  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-29 12:32:40.609  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:32:40.615  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:32:40.625  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:32:40.625  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:32:40.628  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:32:40.629  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:32:40.629  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:32:40.630  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:32:40.631  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-29 12:32:40.633  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-29 12:32:40.633  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-29 12:32:40.634  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-29 12:32:40.634  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-29 12:32:40.635  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-29 12:32:40.636  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-29 12:32:40.636  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-29 12:32:40.637  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-29 12:32:40.637  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-29 12:32:40.642  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-29 12:32:40.652  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:32:40.653  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-29 12:32:40.654  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-29 12:32:40.654  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-29 12:32:40.655  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:32:40.656  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:32:40.670  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:32:40.725  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:32:40.726  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-29 12:32:40.726  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:32:40.726  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:32:40.727  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:32:40.728  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:32:40.728  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:32:40.728  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:32:40.728  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:32:40.729  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:32:40.729  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:32:40.730  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-29 12:32:40.730  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-29 12:32:40.731  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-29 12:32:40.748  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-29 12:32:40.754  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:32:40.762  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:32:40.771  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-29 12:32:40.793  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-29 12:32:40.916  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:32:40.917  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:32:40.918  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:32:40.920  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:32:40.921  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:32:40.921  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:32:40.922  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-29 12:32:40.957  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-29 12:32:40.959  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-29 12:32:40.959  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-29 12:32:41.645  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-29 12:32:41.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-29 12:32:41.646  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:32:41.728  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-29 12:32:41.728  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:32:41.728  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:32:41.840  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-29 12:32:41.845  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-29 12:32:41.856  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-29 12:32:41.875  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-29 12:32:41.876  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-29 12:32:41.900  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-29 12:32:42.068  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-29 12:32:42.069  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-29 12:32:42.069  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=df253c93-764e-11ee-a137-0242ac130003] 
2023-10-29 12:32:42.153  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-29 12:32:42.212  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-29 12:32:42.218  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:32:42.218  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:32:42.219  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:32:42.220  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:32:42.220  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:32:42.220  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:32:42.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-29 12:32:42.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:32:42.221  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-29 12:32:42.222  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-29 12:32:42.291  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-29 12:32:42.291  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:32:42.292  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:32:42.292  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:32:42.292  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-29 12:32:42.292  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:32:42.292  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:32:42.437  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:32:42.438  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:32:42.442  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:32:42.442  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:32:42.442  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:32:42.442  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:32:42.443  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:32:42.443  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-29 12:32:42.448  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-29 12:32:42.452  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-29 12:32:42.452  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-29 12:32:42.565  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:32:42.565  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-29 12:32:42.725  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-29 12:32:42.780  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@1ef8f1ca
2023-10-29 12:32:42.890  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-29 12:32:42.910  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-29 12:32:42.910  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-29 12:32:42.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-29 12:32:42.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-29 12:32:42.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-29 12:32:42.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-29 12:32:42.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-29 12:32:42.912  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-29 12:32:42.912  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-29 12:32:42.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-29 12:32:42.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:32:42.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-29 12:32:42.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-29 12:32:42.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-29 12:32:42.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-29 12:32:42.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-29 12:32:42.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-29 12:32:42.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-29 12:32:42.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-29 12:32:42.916  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:32:42.916  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-29 12:32:42.916  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-29 12:32:42.916  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-29 12:32:42.917  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-29 12:32:42.917  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-29 12:32:42.917  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 399ms (build:49ms init:159ms start:191ms)
2023-10-29 12:32:42.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:32:42.954  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-29 12:32:42.978  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-29 12:32:42.978  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:32:42.980  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-29 12:34:35.073  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-29 12:34:35.123  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-29 12:34:35.123  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:34:35.124  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-29 12:34:35.126  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:34:35.126  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-29 12:34:35.159  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-29 12:34:35.160  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-29 12:34:35.612  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-29 12:34:35.613  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-29 12:34:35.613  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-29 12:34:35.642  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-29 12:34:35.657  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.659  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.723  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.725  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.747  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.747  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.771  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.771  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.786  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.786  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.799  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.008s)
2023-10-29 12:34:35.811  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.812  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.817  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-29 12:34:35.818  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-29 12:34:35.822  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-29 12:34:35.831  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.832  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.841  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-29 12:34:35.850  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.851  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:34:35.980  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-29 12:34:36.746  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-29 12:34:37.524  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-29 12:34:38.377  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:34:38.378  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-29 12:34:38.385  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-29 12:34:38.572  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:34:38.591  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-29 12:34:41.594  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:34:41.862  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-29 12:34:41.864  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-29 12:34:41.865  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-29 12:34:41.865  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:34:41.886  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-29 12:34:41.887  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:34:41.891  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:34:41.898  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:34:41.899  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:34:41.900  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:34:41.901  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:34:41.902  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:34:41.902  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:34:41.904  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-29 12:34:41.905  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-29 12:34:41.905  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-29 12:34:41.906  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-29 12:34:41.906  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-29 12:34:41.907  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-29 12:34:41.907  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-29 12:34:41.907  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-29 12:34:41.908  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-29 12:34:41.908  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-29 12:34:41.910  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-29 12:34:41.921  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:34:41.922  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-29 12:34:41.922  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-29 12:34:41.923  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-29 12:34:41.925  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:34:41.925  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:34:41.935  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:34:41.979  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:34:41.979  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-29 12:34:41.980  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:34:41.980  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:34:41.981  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:34:41.981  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:34:41.982  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:34:41.982  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:34:41.982  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:34:41.983  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:34:41.983  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:34:41.983  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-29 12:34:41.984  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-29 12:34:41.985  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-29 12:34:41.999  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-29 12:34:42.005  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:34:42.012  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:34:42.018  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-29 12:34:42.038  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-29 12:34:42.145  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:34:42.146  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:34:42.147  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:34:42.148  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:34:42.150  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:34:42.150  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:34:42.150  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-29 12:34:42.181  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-29 12:34:42.182  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-29 12:34:42.183  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-29 12:34:42.779  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-29 12:34:42.779  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-29 12:34:42.780  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:34:42.853  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-29 12:34:42.853  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:34:42.853  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:34:42.943  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-29 12:34:42.949  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-29 12:34:42.960  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-29 12:34:42.977  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-29 12:34:42.978  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-29 12:34:42.998  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-29 12:34:43.122  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-29 12:34:43.125  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-29 12:34:43.125  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=275415ff-764f-11ee-932d-0242ac130004] 
2023-10-29 12:34:43.214  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-29 12:34:43.264  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-29 12:34:43.269  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:34:43.269  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:34:43.269  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:34:43.270  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:34:43.270  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:34:43.271  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:34:43.271  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-29 12:34:43.271  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:34:43.271  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-29 12:34:43.272  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-29 12:34:43.332  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-29 12:34:43.333  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:34:43.333  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:34:43.333  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:34:43.333  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-29 12:34:43.334  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:34:43.334  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:34:43.458  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:34:43.459  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:34:43.462  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:34:43.467  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:34:43.467  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:34:43.467  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:34:43.468  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:34:43.468  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-29 12:34:43.472  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-29 12:34:43.476  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-29 12:34:43.477  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-29 12:34:43.569  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:34:43.570  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-29 12:34:43.689  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-29 12:34:43.736  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@4b0d7cb5
2023-10-29 12:34:43.821  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-29 12:34:43.840  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-29 12:34:43.840  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-29 12:34:43.840  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-29 12:34:43.841  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-29 12:34:43.841  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-29 12:34:43.841  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-29 12:34:43.841  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-29 12:34:43.842  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-29 12:34:43.842  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-29 12:34:43.842  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-29 12:34:43.842  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:34:43.843  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-29 12:34:43.843  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-29 12:34:43.843  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-29 12:34:43.843  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-29 12:34:43.843  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-29 12:34:43.844  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-29 12:34:43.844  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-29 12:34:43.844  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-29 12:34:43.845  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:34:43.845  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-29 12:34:43.845  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-29 12:34:43.845  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-29 12:34:43.846  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-29 12:34:43.846  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-29 12:34:43.846  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 343ms (build:69ms init:118ms start:156ms)
2023-10-29 12:34:43.848  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:34:43.883  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-29 12:34:43.909  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-29 12:34:43.909  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:34:43.912  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-29 12:35:08.635  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-29 12:35:08.669  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-29 12:35:08.670  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:35:08.670  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-29 12:35:08.671  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:35:08.672  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-29 12:35:08.691  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-29 12:35:08.694  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-29 12:35:08.891  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-29 12:35:08.892  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-29 12:35:08.892  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-29 12:35:08.911  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-29 12:35:08.921  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.922  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.962  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.963  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.980  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.981  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:08.999  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.000  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.015  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.016  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.025  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-29 12:35:09.037  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.038  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.042  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-29 12:35:09.043  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-29 12:35:09.045  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-29 12:35:09.057  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.058  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.065  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.003s)
2023-10-29 12:35:09.073  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.074  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:35:09.159  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-29 12:35:09.657  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-29 12:35:10.203  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-29 12:35:10.952  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:35:10.953  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-29 12:35:10.959  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-29 12:35:11.111  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:35:11.250  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-29 12:35:11.254  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-29 12:35:11.254  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-29 12:35:11.255  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:35:11.273  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-29 12:35:11.274  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:35:11.278  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:35:11.284  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:35:11.285  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:35:11.286  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:35:11.287  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:35:11.288  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:35:11.288  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:35:11.289  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-29 12:35:11.291  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-29 12:35:11.291  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-29 12:35:11.292  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-29 12:35:11.293  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-29 12:35:11.293  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-29 12:35:11.293  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-29 12:35:11.294  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-29 12:35:11.294  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-29 12:35:11.295  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-29 12:35:11.296  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-29 12:35:11.308  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:35:11.309  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-29 12:35:11.311  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-29 12:35:11.312  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-29 12:35:11.313  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:35:11.314  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:35:11.323  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:35:11.360  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:35:11.361  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-29 12:35:11.361  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:35:11.361  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:35:11.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:35:11.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:35:11.363  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:35:11.364  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:35:11.364  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:35:11.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:35:11.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:35:11.365  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-29 12:35:11.366  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-29 12:35:11.367  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-29 12:35:11.380  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-29 12:35:11.386  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:35:11.393  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:35:11.397  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-29 12:35:11.413  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-29 12:35:11.520  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:35:11.521  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:35:11.523  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:35:11.524  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:35:11.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:35:11.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:35:11.526  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-29 12:35:11.558  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-29 12:35:11.560  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-29 12:35:11.560  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-29 12:35:12.132  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-29 12:35:12.132  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-29 12:35:12.133  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:35:12.199  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-29 12:35:12.200  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:35:12.200  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:35:12.276  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-29 12:35:12.279  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-29 12:35:12.286  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-29 12:35:12.298  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-29 12:35:12.299  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-29 12:35:12.317  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-29 12:35:12.410  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-29 12:35:12.411  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-29 12:35:12.411  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=38d0196d-764f-11ee-a20f-0242ac130004] 
2023-10-29 12:35:12.478  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-29 12:35:12.523  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-29 12:35:12.528  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:35:12.528  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:35:12.529  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:35:12.530  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:35:12.530  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:35:12.531  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:35:12.531  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-29 12:35:12.531  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:35:12.531  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-29 12:35:12.531  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-29 12:35:12.585  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-29 12:35:12.586  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:35:12.586  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:35:12.586  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:35:12.587  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-29 12:35:12.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:35:12.587  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:35:12.702  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:35:12.702  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:35:12.705  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:35:12.705  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:35:12.706  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:35:12.706  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:35:12.706  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:35:12.706  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-29 12:35:12.711  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-29 12:35:12.714  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-29 12:35:12.715  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-29 12:35:12.797  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:35:12.797  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-29 12:35:12.905  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-29 12:35:12.952  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@6b3b3a03
2023-10-29 12:35:13.042  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-29 12:35:13.054  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-29 12:35:13.054  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-29 12:35:13.055  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-29 12:35:13.055  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-29 12:35:13.055  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-29 12:35:13.056  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-29 12:35:13.056  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-29 12:35:13.056  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-29 12:35:13.056  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-29 12:35:13.057  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-29 12:35:13.057  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:35:13.057  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-29 12:35:13.057  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-29 12:35:13.058  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-29 12:35:13.058  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-29 12:35:13.058  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-29 12:35:13.058  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-29 12:35:13.059  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-29 12:35:13.059  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-29 12:35:13.059  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:35:13.059  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-29 12:35:13.060  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-29 12:35:13.060  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-29 12:35:13.060  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-29 12:35:13.060  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-29 12:35:13.061  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 293ms (build:31ms init:107ms start:155ms)
2023-10-29 12:35:13.062  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:35:13.089  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-29 12:35:13.113  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-29 12:35:13.113  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:35:13.115  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-29 12:38:01.884  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-29 12:38:01.918  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-29 12:38:01.919  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:38:01.919  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-29 12:38:01.921  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:38:01.921  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-29 12:38:01.944  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-29 12:38:01.944  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-29 12:38:02.145  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-29 12:38:02.145  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-29 12:38:02.146  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-29 12:38:02.164  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-29 12:38:02.175  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.176  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.216  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.217  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.240  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.241  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.258  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.259  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.270  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.271  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.281  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-29 12:38:02.292  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.293  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.296  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-29 12:38:02.297  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-29 12:38:02.299  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-29 12:38:02.310  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.310  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.319  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-29 12:38:02.327  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.327  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:38:02.422  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-29 12:38:02.930  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-29 12:38:03.468  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-29 12:38:04.244  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:38:04.245  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-29 12:38:04.251  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-29 12:38:04.410  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:38:04.546  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-29 12:38:04.550  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-29 12:38:04.551  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-29 12:38:04.551  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:38:04.571  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-29 12:38:04.572  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:38:04.576  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:38:04.584  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:38:04.584  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:38:04.586  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:38:04.586  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:38:04.587  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:38:04.588  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:38:04.589  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-29 12:38:04.591  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-29 12:38:04.591  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-29 12:38:04.592  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-29 12:38:04.592  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-29 12:38:04.593  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-29 12:38:04.593  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-29 12:38:04.594  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-29 12:38:04.594  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-29 12:38:04.595  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-29 12:38:04.596  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-29 12:38:04.608  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:38:04.608  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-29 12:38:04.609  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-29 12:38:04.610  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-29 12:38:04.611  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:38:04.611  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:38:04.622  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:38:04.661  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:38:04.662  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-29 12:38:04.662  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:38:04.663  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:38:04.664  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:38:04.664  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:38:04.665  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:38:04.665  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:38:04.665  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:38:04.666  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:38:04.666  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:38:04.667  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-29 12:38:04.667  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-29 12:38:04.669  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-29 12:38:04.682  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-29 12:38:04.688  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:38:04.695  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:38:04.700  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-29 12:38:04.719  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-29 12:38:04.825  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:38:04.826  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:38:04.827  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:38:04.829  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:38:04.830  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:38:04.830  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:38:04.830  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-29 12:38:04.862  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-29 12:38:04.864  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-29 12:38:04.864  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-29 12:38:05.470  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-29 12:38:05.471  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-29 12:38:05.471  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:38:05.538  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-29 12:38:05.539  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:38:05.539  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:38:05.625  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-29 12:38:05.629  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-29 12:38:05.636  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-29 12:38:05.649  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-29 12:38:05.650  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-29 12:38:05.667  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-29 12:38:05.760  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-29 12:38:05.761  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-29 12:38:05.761  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=a0230e97-764f-11ee-bc9e-0242ac130004] 
2023-10-29 12:38:05.830  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-29 12:38:05.879  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-29 12:38:05.884  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:38:05.884  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:38:05.885  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:38:05.885  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:38:05.885  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:38:05.885  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:38:05.886  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-29 12:38:05.886  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:38:05.886  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-29 12:38:05.887  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-29 12:38:05.942  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-29 12:38:05.942  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:38:05.942  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:38:05.943  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:38:05.943  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-29 12:38:05.943  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:38:05.944  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:38:06.059  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:38:06.060  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:38:06.062  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:38:06.063  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:38:06.063  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:38:06.064  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:38:06.064  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:38:06.064  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-29 12:38:06.068  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-29 12:38:06.072  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-29 12:38:06.072  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-29 12:38:06.155  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:38:06.155  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-29 12:38:06.263  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-29 12:38:06.310  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@6b3b3a03
2023-10-29 12:38:06.392  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-29 12:38:06.404  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-29 12:38:06.405  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-29 12:38:06.405  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-29 12:38:06.406  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-29 12:38:06.406  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-29 12:38:06.407  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-29 12:38:06.407  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-29 12:38:06.408  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-29 12:38:06.408  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-29 12:38:06.408  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-29 12:38:06.409  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:38:06.409  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-29 12:38:06.409  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-29 12:38:06.409  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-29 12:38:06.410  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-29 12:38:06.410  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-29 12:38:06.410  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-29 12:38:06.411  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-29 12:38:06.411  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-29 12:38:06.411  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:38:06.412  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-29 12:38:06.412  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-29 12:38:06.412  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-29 12:38:06.413  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-29 12:38:06.413  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-29 12:38:06.413  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 290ms (build:34ms init:107ms start:149ms)
2023-10-29 12:38:06.415  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:38:06.444  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-29 12:38:06.472  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-29 12:38:06.473  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:38:06.475  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-29 12:39:05.555  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-29 12:39:05.590  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-29 12:39:05.591  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:39:05.591  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-29 12:39:05.593  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:39:05.593  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-29 12:39:05.616  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-29 12:39:05.617  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-29 12:39:05.825  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-29 12:39:05.825  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-29 12:39:05.826  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-29 12:39:05.845  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-29 12:39:05.857  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.858  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.898  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.898  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.918  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.919  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.937  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.938  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.951  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.951  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.961  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-29 12:39:05.972  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.973  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.977  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-29 12:39:05.977  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-29 12:39:05.980  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-29 12:39:05.990  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:05.991  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:06.000  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-29 12:39:06.008  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:06.008  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-29 12:39:06.102  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-29 12:39:06.608  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-29 12:39:07.148  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-29 12:39:07.912  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:39:07.913  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-29 12:39:07.918  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-29 12:39:08.093  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-29 12:39:08.238  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-29 12:39:08.241  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-29 12:39:08.242  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-29 12:39:08.242  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:39:08.266  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-29 12:39:08.266  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:39:08.271  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:39:08.278  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:39:08.279  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:39:08.281  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:39:08.282  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:39:08.283  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:39:08.283  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:39:08.285  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-29 12:39:08.287  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-29 12:39:08.288  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-29 12:39:08.288  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-29 12:39:08.289  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-29 12:39:08.290  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-29 12:39:08.290  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-29 12:39:08.291  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-29 12:39:08.291  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-29 12:39:08.292  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-29 12:39:08.294  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-29 12:39:08.306  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:39:08.307  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-29 12:39:08.307  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-29 12:39:08.309  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-29 12:39:08.310  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:39:08.310  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:39:08.321  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:39:08.366  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:39:08.367  WARNING [main                          ] ger.notification.PushNotificationHandler : OR_FIREBASE_CONFIG_FILE invalid path or file not readable: /deployment/manager/fcm.json
2023-10-29 12:39:08.368  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:39:08.368  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:39:08.369  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:39:08.370  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:39:08.370  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:39:08.370  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:39:08.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:39:08.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:39:08.372  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:39:08.372  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-29 12:39:08.373  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-29 12:39:08.374  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-29 12:39:08.390  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-29 12:39:08.397  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:39:08.404  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:39:08.408  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-29 12:39:08.426  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-29 12:39:08.533  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:39:08.534  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-29 12:39:08.536  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:39:08.538  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-29 12:39:08.540  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-29 12:39:08.541  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-29 12:39:08.541  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-29 12:39:08.574  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-29 12:39:08.576  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-29 12:39:08.576  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-29 12:39:09.128  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-29 12:39:09.128  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-29 12:39:09.129  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-29 12:39:09.195  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-29 12:39:09.195  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-29 12:39:09.195  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-29 12:39:09.277  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-29 12:39:09.281  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-29 12:39:09.288  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-29 12:39:09.302  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-29 12:39:09.302  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-29 12:39:09.323  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-29 12:39:09.425  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-29 12:39:09.426  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-29 12:39:09.426  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=c61394d6-764f-11ee-89ec-0242ac130004] 
2023-10-29 12:39:09.498  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-29 12:39:09.546  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-29 12:39:09.551  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-29 12:39:09.551  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-29 12:39:09.552  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-29 12:39:09.553  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-29 12:39:09.554  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-29 12:39:09.554  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-29 12:39:09.554  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-29 12:39:09.555  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-29 12:39:09.556  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-29 12:39:09.556  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-29 12:39:09.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-29 12:39:09.613  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-29 12:39:09.614  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-29 12:39:09.614  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-29 12:39:09.614  WARNING [main                          ] ger.notification.PushNotificationHandler : FCM configuration invalid so cannot start
2023-10-29 12:39:09.614  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-29 12:39:09.615  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-29 12:39:09.727  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-29 12:39:09.727  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-29 12:39:09.730  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-29 12:39:09.731  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-29 12:39:09.731  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-29 12:39:09.731  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-29 12:39:09.732  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-29 12:39:09.732  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-29 12:39:09.736  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-29 12:39:09.739  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-29 12:39:09.740  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-29 12:39:09.833  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-29 12:39:09.833  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-29 12:39:09.947  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-29 12:39:09.994  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@107947a2
2023-10-29 12:39:10.074  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-29 12:39:10.090  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-29 12:39:10.090  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-29 12:39:10.091  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-29 12:39:10.091  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-29 12:39:10.091  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-29 12:39:10.092  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-29 12:39:10.092  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-29 12:39:10.092  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-29 12:39:10.093  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-29 12:39:10.093  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-29 12:39:10.093  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:39:10.094  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-29 12:39:10.094  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-29 12:39:10.094  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-29 12:39:10.095  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-29 12:39:10.095  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-29 12:39:10.095  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-29 12:39:10.095  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-29 12:39:10.096  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-29 12:39:10.096  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-29 12:39:10.096  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-29 12:39:10.097  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-29 12:39:10.097  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-29 12:39:10.097  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-29 12:39:10.097  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-29 12:39:10.098  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 293ms (build:30ms init:113ms start:150ms)
2023-10-29 12:39:10.099  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-29 12:39:10.127  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-29 12:39:10.153  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-29 12:39:10.154  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-29 12:39:10.156  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-29 13:31:41.732  INFO    [Thread-0 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1316 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 13:35:11.738  INFO    [Thread-0 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1423 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 13:54:11.808  INFO    [Thread-1 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1488 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:03:11.843  INFO    [Thread-4 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1553 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:06:11.861  INFO    [Thread-1 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1632 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:28:01.194  INFO    [Thread-5 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=1719 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:28:08.590  WARN    [Thread-1 (ActiveMQ-serve..536)] TenantClientCredentialsGrantsLoginModule : Login failed. Invalid status: 401, OAuth2 error. Error: unauthorized_client, Error description: Invalid client secret
2023-10-29 14:28:08.592  WARNING [Thread-1 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ222216: Security problem while authenticating: AMQ229031: Unable to validate user from /192.168.65.1:34870. Username: master:quy; SSL certificate subject DN: unavailable
2023-10-29 14:44:01.207  INFO    [Thread-2 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=2176 on address=$sys.mqtt.retain.master.quy_esp_demo.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:44:26.623  SEVERE  [Thread-5 (ActiveMQ-serve..536)] ache.activemq.artemis.core.protocol.mqtt : AMQ834002: Error processing control packet: MqttPublishMessage[fixedHeader=MqttFixedHeader[messageType=PUBLISH, isDup=false, qosLevel=AT_MOST_ONCE, isRetain=false, remainingLength=71], variableHeader=MqttPublishVariableHeader[topicName=master/quy_esp/writeattributevalue/MQ135/65VFyoeH9DRpTsLZxtdvkQ, packetId=-1], payload=PooledSlicedByteBuf(ridx: 0, widx: 6, cap: 6/6, unwrapped: PooledUnsafeDirectByteBuf(ridx: 73, widx: 73, cap: 1024))]
ActiveMQSecurityException[errorType=SECURITY_EXCEPTION message=AMQ229032: User: master:quy does not have permission='SEND' on address master.quy_esp.writeattributevalue.MQ135.65VFyoeH9DRpTsLZxtdvkQ]
	at org.apache.activemq.artemis.core.security.impl.SecurityStoreImpl.check(SecurityStoreImpl.java:305)
	at org.apache.activemq.artemis.core.server.impl.ServerSessionImpl.securityCheck(ServerSessionImpl.java:509)
	at org.apache.activemq.artemis.core.server.impl.ServerSessionImpl.doSend(ServerSessionImpl.java:2292)
	at org.apache.activemq.artemis.core.server.impl.ServerSessionImpl.send(ServerSessionImpl.java:1925)
	at org.apache.activemq.artemis.core.server.impl.ServerSessionImpl.send(ServerSessionImpl.java:1864)
	at org.apache.activemq.artemis.core.protocol.mqtt.MQTTPublishManager.sendToQueue(MQTTPublishManager.java:235)
	at org.apache.activemq.artemis.core.protocol.mqtt.MQTTProtocolHandler.handlePublish(MQTTProtocolHandler.java:321)
	at org.apache.activemq.artemis.core.protocol.mqtt.MQTTProtocolHandler.act(MQTTProtocolHandler.java:161)
	at org.apache.activemq.artemis.utils.actors.Actor.doTask(Actor.java:32)
	at org.apache.activemq.artemis.utils.actors.ProcessorBase.executePendingTasks(ProcessorBase.java:68)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at org.apache.activemq.artemis.utils.ActiveMQThreadFactory$1.run(ActiveMQThreadFactory.java:118)
2023-10-29 14:44:26.626  SEVERE  [Thread-5 (ActiveMQ-serve..536)] ache.activemq.artemis.core.protocol.mqtt : AMQ834007: Authorization failure sending will message: AMQ229032: User: master:quy does not have permission='SEND' on address master.quy_esp.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-29 14:52:38.314  INFO    [WebService task-7             ] org.openremote.container.web.WebService  : Saving image in manger_config.json..
2023-10-29 14:52:38.318  INFO    [WebService task-4             ] org.openremote.container.web.WebService  : Saving manager_config.json..
2023-10-29 14:52:38.323  INFO    [WebService task-3             ] org.openremote.container.web.WebService  : Saving image in manger_config.json..
2023-10-29 14:54:19.726  INFO    [WebService task-3             ] org.openremote.container.web.WebService  : Saving manager_config.json..
2023-10-29 14:54:19.726  INFO    [WebService task-4             ] org.openremote.container.web.WebService  : Saving image in manger_config.json..
2023-10-29 15:17:20.586  WARN    [Thread-4 (ActiveMQ-serve..536)] TenantClientCredentialsGrantsLoginModule : Login failed. Invalid status: 401, OAuth2 error. Error: unauthorized_client, Error description: Invalid client secret
2023-10-29 15:17:20.588  WARNING [Thread-4 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ222216: Security problem while authenticating: AMQ229031: Unable to validate user from /192.168.65.1:35228. Username: master:quy; SSL certificate subject DN: unavailable
2023-10-29 15:32:31.492  INFO    [Thread-4 (ActiveMQ-serve..536)] org.apache.activemq.artemis.core.server  : AMQ224112: Auto removing queue $sys.mqtt.retain.master.quy_esp.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ with queueID=2554 on address=$sys.mqtt.retain.master.quy_esp.writeattributevalue.temperature.65VFyoeH9DRpTsLZxtdvkQ
2023-10-30 03:36:25.611  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-30 03:36:25.671  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-30 03:36:25.672  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-30 03:36:25.672  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-30 03:36:25.674  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 03:36:25.675  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-30 03:36:25.715  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-30 03:36:25.716  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-30 03:36:26.133  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-30 03:36:26.133  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-30 03:36:26.133  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-30 03:36:26.162  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-30 03:36:26.177  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.178  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.251  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.252  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.270  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.271  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.289  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.295  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.316  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.317  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.331  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.006s)
2023-10-30 03:36:26.343  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.344  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.348  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-30 03:36:26.349  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-30 03:36:26.352  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-30 03:36:26.367  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.368  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.379  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.007s)
2023-10-30 03:36:26.392  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.394  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:36:26.543  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-30 03:36:27.458  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-30 03:36:28.248  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-30 03:36:29.114  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 03:36:29.114  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-30 03:36:29.122  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-30 03:36:29.330  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 03:36:29.349  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-30 03:36:32.352  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 03:36:32.624  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-30 03:36:32.627  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-30 03:36:32.627  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-30 03:36:32.627  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-30 03:36:32.652  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-30 03:36:32.653  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-30 03:36:32.658  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 03:36:32.667  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 03:36:32.668  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 03:36:32.669  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 03:36:32.670  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 03:36:32.671  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 03:36:32.671  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 03:36:32.673  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-30 03:36:32.674  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-30 03:36:32.674  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-30 03:36:32.675  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-30 03:36:32.675  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-30 03:36:32.676  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-30 03:36:32.676  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-30 03:36:32.676  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-30 03:36:32.677  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-30 03:36:32.678  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-30 03:36:32.679  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-30 03:36:32.693  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-30 03:36:32.694  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-30 03:36:32.695  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-30 03:36:32.696  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-30 03:36:32.697  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-30 03:36:32.698  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 03:36:32.711  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:36:32.762  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 03:36:32.815  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 03:36:32.816  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 03:36:32.817  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-30 03:36:32.817  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 03:36:32.818  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-30 03:36:32.818  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 03:36:32.818  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 03:36:32.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-30 03:36:32.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-30 03:36:32.820  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-30 03:36:32.820  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-30 03:36:32.821  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-30 03:36:32.837  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-30 03:36:32.843  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-30 03:36:32.850  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-30 03:36:32.858  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-30 03:36:32.878  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-30 03:36:32.986  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:36:32.988  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:36:32.989  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 03:36:32.990  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-30 03:36:32.992  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 03:36:32.992  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 03:36:32.993  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-30 03:36:33.033  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-30 03:36:33.035  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-30 03:36:33.035  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-30 03:36:33.711  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-30 03:36:33.711  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-30 03:36:33.712  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-30 03:36:33.796  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-30 03:36:33.797  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-30 03:36:33.797  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 03:36:33.911  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-30 03:36:33.915  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-30 03:36:33.925  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-30 03:36:33.941  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-30 03:36:33.941  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-30 03:36:33.963  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-30 03:36:34.076  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-30 03:36:34.077  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-30 03:36:34.077  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=23fa6617-76cd-11ee-9514-0242ac130002] 
2023-10-30 03:36:34.160  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-30 03:36:34.222  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-30 03:36:34.230  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 03:36:34.231  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 03:36:34.232  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 03:36:34.233  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 03:36:34.233  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 03:36:34.233  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 03:36:34.234  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-30 03:36:34.235  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-30 03:36:34.235  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-30 03:36:34.236  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-30 03:36:34.307  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-30 03:36:34.307  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-30 03:36:34.307  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 03:36:34.307  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 03:36:34.313  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 03:36:34.314  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 03:36:34.464  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-30 03:36:34.465  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 03:36:34.468  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-30 03:36:34.468  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 03:36:34.468  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 03:36:34.469  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-30 03:36:34.469  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-30 03:36:34.469  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-30 03:36:34.474  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-30 03:36:34.479  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-30 03:36:34.479  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-30 03:36:34.585  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-30 03:36:34.585  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-30 03:36:34.736  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-30 03:36:34.792  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@6c6f9897
2023-10-30 03:36:34.888  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-30 03:36:34.908  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-30 03:36:34.908  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-30 03:36:34.909  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-30 03:36:34.910  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-30 03:36:34.910  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-30 03:36:34.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-30 03:36:34.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-30 03:36:34.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-30 03:36:34.911  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-30 03:36:34.912  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-30 03:36:34.912  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-30 03:36:34.912  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-30 03:36:34.913  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-30 03:36:34.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-30 03:36:34.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-30 03:36:34.914  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-30 03:36:34.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-30 03:36:34.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-30 03:36:34.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-30 03:36:34.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-30 03:36:34.915  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 386ms (build:58ms init:150ms start:178ms)
2023-10-30 03:36:34.917  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-30 03:36:34.980  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-30 03:36:35.018  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-30 03:36:35.018  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 03:36:35.020  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-30 03:38:46.974  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-30 03:38:47.008  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-30 03:38:47.009  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-30 03:38:47.009  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-30 03:38:47.011  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 03:38:47.011  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-30 03:38:47.035  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-30 03:38:47.036  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-30 03:38:47.240  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-30 03:38:47.240  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-30 03:38:47.241  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-30 03:38:47.259  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-30 03:38:47.271  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.272  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.313  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.314  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.329  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.329  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.349  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.350  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.363  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.364  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.373  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-30 03:38:47.385  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.386  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.389  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-30 03:38:47.390  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-30 03:38:47.393  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-30 03:38:47.402  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.403  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.412  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-30 03:38:47.419  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.420  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 03:38:47.513  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-30 03:38:48.028  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-30 03:38:48.564  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-30 03:38:49.296  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 03:38:49.296  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-30 03:38:49.302  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-30 03:38:49.460  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 03:38:49.602  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-30 03:38:49.605  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-30 03:38:49.605  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-30 03:38:49.606  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-30 03:38:49.624  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-30 03:38:49.625  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-30 03:38:49.630  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 03:38:49.638  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 03:38:49.639  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 03:38:49.641  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 03:38:49.642  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 03:38:49.643  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 03:38:49.643  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 03:38:49.645  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-30 03:38:49.646  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-30 03:38:49.647  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-30 03:38:49.647  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-30 03:38:49.648  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-30 03:38:49.648  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-30 03:38:49.648  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-30 03:38:49.649  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-30 03:38:49.650  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-30 03:38:49.650  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-30 03:38:49.652  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-30 03:38:49.664  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-30 03:38:49.665  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-30 03:38:49.666  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-30 03:38:49.667  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-30 03:38:49.668  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-30 03:38:49.669  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 03:38:49.679  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:38:49.716  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 03:38:49.751  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 03:38:49.752  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 03:38:49.753  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-30 03:38:49.754  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 03:38:49.754  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-30 03:38:49.754  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 03:38:49.755  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 03:38:49.755  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-30 03:38:49.756  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-30 03:38:49.756  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-30 03:38:49.756  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-30 03:38:49.758  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-30 03:38:49.771  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-30 03:38:49.777  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-30 03:38:49.784  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-30 03:38:49.789  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-30 03:38:49.807  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-30 03:38:49.913  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:38:49.915  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 03:38:49.916  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 03:38:49.917  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-30 03:38:49.918  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 03:38:49.919  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 03:38:49.919  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-30 03:38:49.951  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-30 03:38:49.952  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-30 03:38:49.952  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-30 03:38:50.525  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-30 03:38:50.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-30 03:38:50.526  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-30 03:38:50.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-30 03:38:50.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-30 03:38:50.599  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 03:38:50.681  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-30 03:38:50.684  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-30 03:38:50.691  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-30 03:38:50.706  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-30 03:38:50.707  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-30 03:38:50.728  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-30 03:38:50.835  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-30 03:38:50.836  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-30 03:38:50.836  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=758026e2-76cd-11ee-a03c-0242ac130004] 
2023-10-30 03:38:50.909  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-30 03:38:50.955  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-30 03:38:50.960  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 03:38:50.961  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 03:38:50.961  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 03:38:50.962  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 03:38:50.962  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 03:38:50.963  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 03:38:50.963  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-30 03:38:50.963  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-30 03:38:50.963  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-30 03:38:50.964  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-30 03:38:51.021  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-30 03:38:51.021  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-30 03:38:51.022  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 03:38:51.022  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 03:38:51.026  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 03:38:51.027  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 03:38:51.143  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-30 03:38:51.143  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 03:38:51.146  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-30 03:38:51.146  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 03:38:51.146  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 03:38:51.147  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-30 03:38:51.147  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-30 03:38:51.147  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-30 03:38:51.151  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-30 03:38:51.156  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-30 03:38:51.156  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-30 03:38:51.238  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-30 03:38:51.238  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-30 03:38:51.354  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-30 03:38:51.423  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@544e713e
2023-10-30 03:38:51.511  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-30 03:38:51.532  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:24)
2023-10-30 03:38:51.533  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-30 03:38:51.533  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-30 03:38:51.533  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-30 03:38:51.534  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-30 03:38:51.535  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-30 03:38:51.535  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-30 03:38:51.536  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-30 03:38:51.536  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-30 03:38:51.536  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-30 03:38:51.536  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-30 03:38:51.537  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-30 03:38:51.537  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-30 03:38:51.537  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-30 03:38:51.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-30 03:38:51.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-30 03:38:51.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-30 03:38:51.538  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-30 03:38:51.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-30 03:38:51.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-30 03:38:51.539  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-30 03:38:51.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-30 03:38:51.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-30 03:38:51.540  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-30 03:38:51.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-30 03:38:51.541  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 316ms (build:32ms init:115ms start:169ms)
2023-10-30 03:38:51.543  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-30 03:38:51.571  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-30 03:38:51.595  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-30 03:38:51.595  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 03:38:51.599  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-30 03:40:44.445  WARNING [WebService task-5             ] remote.manager.asset.AssetStorageService : Asset type does not match parent GROUP asset's childAssetType attribute: asset=HTTPAgent{id='null', name='Weather', type ='HTTPAgent', parentId='6shcItpDLAMnaEMssrbV2e', realm='master'}
2023-10-30 03:40:44.450  INFO    [WebService task-5             ] emote.container.web.WebServiceExceptions : Web service exception in 'RESTEasy Dispatch' for 'POST http://192.168.1.8/asset', root cause: java.lang.IllegalStateException: Asset type does not match parent GROUP asset's childAssetType attribute: asset=HTTPAgent{id='null', name='Weather', type ='HTTPAgent', parentId='6shcItpDLAMnaEMssrbV2e', realm='master'}
2023-10-30 03:40:58.591  SEVERE  [Scheduled task-7              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6N8XiN3H9c8ZtSXdlR0HzT', name='Weather', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.http.HTTPProtocol.lambda$doStart$1(HTTPProtocol.java:305)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:304)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 03:44:50.091  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client6N8XiN3H9c8ZtSXdlR0HzT (seda://ActuatorTopic)
2023-10-30 03:44:50.092  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client6N8XiN3H9c8ZtSXdlR0HzT (seda://ActuatorTopic)
2023-10-30 03:46:13.276  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client6N8XiN3H9c8ZtSXdlR0HzT (seda://ActuatorTopic)
2023-10-30 03:46:13.283  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client6N8XiN3H9c8ZtSXdlR0HzT (seda://ActuatorTopic)
2023-10-30 03:46:37.867  SEVERE  [Scheduled task-4              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6Pbb7oJE2bi06scKtXe5ES', name='myWeater', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.http.HTTPProtocol.lambda$doStart$1(HTTPProtocol.java:305)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:304)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 03:47:14.937  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 03:47:14.943  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 03:47:14.960  SEVERE  [Scheduled task-8              ] gent.protocol.http.HTTPProtocol.PROTOCOL : Invalid URI
java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-30 03:47:14.962  SEVERE  [Scheduled task-8              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6Pbb7oJE2bi06scKtXe5ES', name='myWeater', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 03:48:28.158  INFO    [Scheduled task-3              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 03:48:28.173  INFO    [Scheduled task-3              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 03:48:28.178  SEVERE  [Scheduled task-3              ] gent.protocol.http.HTTPProtocol.PROTOCOL : Invalid URI
java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-30 03:48:28.180  SEVERE  [Scheduled task-3              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6Pbb7oJE2bi06scKtXe5ES', name='myWeater', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 05:11:52.103  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-30 05:11:52.164  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-30 05:11:52.165  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-30 05:11:52.165  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-30 05:11:52.167  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 05:11:52.168  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-30 05:11:52.213  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-30 05:11:52.213  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-30 05:11:52.608  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-30 05:11:52.609  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-30 05:11:52.609  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-30 05:11:52.639  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-30 05:11:52.654  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.655  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.728  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.734  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.761  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.762  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.805  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.806  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.832  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.833  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.849  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.008s)
2023-10-30 05:11:52.865  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.877  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.894  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-30 05:11:52.896  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-30 05:11:52.899  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-30 05:11:52.914  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.915  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.923  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-30 05:11:52.932  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:52.933  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 05:11:53.094  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-30 05:11:54.018  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-30 05:11:54.710  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-30 05:11:55.556  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 05:11:55.556  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-30 05:11:55.564  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-30 05:11:55.759  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 05:11:55.777  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-30 05:11:58.780  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 05:11:59.036  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-30 05:11:59.039  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-30 05:11:59.039  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-30 05:11:59.040  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-30 05:11:59.063  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-30 05:11:59.064  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-30 05:11:59.068  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 05:11:59.075  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 05:11:59.076  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 05:11:59.077  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 05:11:59.078  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 05:11:59.079  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 05:11:59.079  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 05:11:59.080  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-30 05:11:59.081  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-30 05:11:59.082  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-30 05:11:59.082  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-30 05:11:59.082  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-30 05:11:59.083  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-30 05:11:59.083  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-30 05:11:59.084  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-30 05:11:59.084  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-30 05:11:59.085  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-30 05:11:59.089  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-30 05:11:59.099  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-30 05:11:59.100  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-30 05:11:59.100  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-30 05:11:59.101  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-30 05:11:59.103  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-30 05:11:59.103  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 05:11:59.116  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 05:11:59.168  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 05:11:59.216  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 05:11:59.217  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 05:11:59.218  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-30 05:11:59.218  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 05:11:59.219  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-30 05:11:59.219  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 05:11:59.219  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 05:11:59.219  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-30 05:11:59.220  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-30 05:11:59.220  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-30 05:11:59.220  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-30 05:11:59.221  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-30 05:11:59.236  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-30 05:11:59.242  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-30 05:11:59.249  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-30 05:11:59.257  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-30 05:11:59.279  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-30 05:11:59.388  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 05:11:59.389  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 05:11:59.391  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 05:11:59.392  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-30 05:11:59.393  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 05:11:59.394  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 05:11:59.394  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-30 05:11:59.432  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-30 05:11:59.434  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-30 05:11:59.434  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-30 05:12:00.213  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-30 05:12:00.213  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-30 05:12:00.214  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-30 05:12:00.308  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-30 05:12:00.309  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-30 05:12:00.309  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 05:12:00.447  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-30 05:12:00.453  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-30 05:12:00.467  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-30 05:12:00.494  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-30 05:12:00.495  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-30 05:12:00.525  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-30 05:12:00.681  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-30 05:12:00.682  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-30 05:12:00.682  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=79427386-76da-11ee-b0a9-0242ac130005] 
2023-10-30 05:12:00.785  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-30 05:12:00.872  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-30 05:12:00.878  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 05:12:00.879  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 05:12:00.880  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 05:12:00.881  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 05:12:00.881  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 05:12:00.881  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 05:12:00.882  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-30 05:12:00.882  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-30 05:12:00.883  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-30 05:12:00.883  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-30 05:12:00.972  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-30 05:12:00.973  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-30 05:12:00.973  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 05:12:00.973  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 05:12:00.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 05:12:00.987  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 05:12:01.167  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-30 05:12:01.169  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 05:12:01.174  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-30 05:12:01.175  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 05:12:01.176  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 05:12:01.176  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-30 05:12:01.176  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-30 05:12:01.177  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-30 05:12:01.186  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-30 05:12:01.288  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-30 05:12:01.289  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-30 05:12:01.297  SEVERE  [Scheduled task-4              ] gent.protocol.http.HTTPProtocol.PROTOCOL : Invalid URI
java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-30 05:12:01.303  SEVERE  [Scheduled task-4              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6Pbb7oJE2bi06scKtXe5ES', name='myWeater', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 05:12:01.362  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-30 05:12:01.362  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-30 05:12:01.513  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-30 05:12:01.571  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@15f63744
2023-10-30 05:12:01.665  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-30 05:12:01.688  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:25)
2023-10-30 05:12:01.689  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-30 05:12:01.690  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-30 05:12:01.690  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-30 05:12:01.690  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-30 05:12:01.690  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-30 05:12:01.690  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-30 05:12:01.691  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-30 05:12:01.691  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-30 05:12:01.691  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-30 05:12:01.691  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-30 05:12:01.691  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-30 05:12:01.692  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-30 05:12:01.693  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-30 05:12:01.694  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 05:12:01.694  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 387ms (build:56ms init:151ms start:180ms)
2023-10-30 05:12:01.695  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-30 05:12:01.745  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-30 05:12:01.773  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-30 05:12:01.773  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 05:12:01.775  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-30 05:13:23.790  INFO    [Scheduled task-4              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 05:13:23.800  INFO    [Scheduled task-4              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client6Pbb7oJE2bi06scKtXe5ES (seda://ActuatorTopic)
2023-10-30 05:13:23.808  SEVERE  [Scheduled task-4              ] gent.protocol.http.HTTPProtocol.PROTOCOL : Invalid URI
java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-30 05:13:23.809  SEVERE  [Scheduled task-4              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='6Pbb7oJE2bi06scKtXe5ES', name='myWeater', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.URISyntaxException: Illegal character in query at index 109: https://api.openweathermap.org/data/3.0/onecall/day_summary?lat=39.099724&lon=-94.578331&dt=1643803200&appid= ed02b217540012b28c3d6ff72c8ac711
	at java.base/java.net.URI$Parser.fail(URI.java:2976)
	at java.base/java.net.URI$Parser.checkChars(URI.java:3147)
	at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3235)
	at java.base/java.net.URI$Parser.parse(URI.java:3177)
	at java.base/java.net.URI.<init>(URI.java:623)
	at org.apache.http.client.utils.URIBuilder.<init>(URIBuilder.java:82)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:314)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 07:19:12.275  WARNING [Scheduled task-4              ] col.io.AbstractIOClientProtocol.PROTOCOL : Failed to create IO client for protocol: MQTT Client[]
java.lang.NullPointerException: Server host must not be null.
	at com.hivemq.client.internal.util.Checks.notNull(Checks.java:32)
	at com.hivemq.client.internal.util.Checks.notEmpty(Checks.java:39)
	at com.hivemq.client.internal.mqtt.MqttClientTransportConfigImplBuilder.serverHost(MqttClientTransportConfigImplBuilder.java:86)
	at com.hivemq.client.internal.mqtt.MqttRxClientBuilderBase.serverHost(MqttRxClientBuilderBase.java:85)
	at com.hivemq.client.internal.mqtt.mqtt3.Mqtt3RxClientViewBuilder.serverHost(Mqtt3RxClientViewBuilder.java:38)
	at org.openremote.agent.protocol.mqtt.AbstractMQTT_IOClient.<init>(AbstractMQTT_IOClient.java:139)
	at org.openremote.agent.protocol.mqtt.MQTT_IOClient.<init>(MQTT_IOClient.java:34)
	at org.openremote.agent.protocol.mqtt.MQTTProtocol.doCreateIoClient(MQTTProtocol.java:112)
	at org.openremote.agent.protocol.mqtt.MQTTProtocol.doCreateIoClient(MQTTProtocol.java:41)
	at org.openremote.agent.protocol.io.AbstractIOClientProtocol.createIoClient(AbstractIOClientProtocol.java:182)
	at org.openremote.agent.protocol.mqtt.MQTTProtocol.createIoClient(MQTTProtocol.java:75)
	at org.openremote.agent.protocol.mqtt.MQTTProtocol.createIoClient(MQTTProtocol.java:41)
	at org.openremote.agent.protocol.io.AbstractIOClientProtocol.doStart(AbstractIOClientProtocol.java:154)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-30 07:31:26.387  INFO    [Pool-PersistenceTopic-52      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1152', version='0', name='123', lang='JSON', createdOn='Mon Oct 30 07:31:26 CET 2023', lastModified='Mon Oct 30 07:31:26 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 07:31:26.412  INFO    [Pool-PersistenceTopic-52      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=0, status=READY}]'}
2023-10-30 08:04:17.051  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=0, status=DEPLOYED}]'}
2023-10-30 08:04:17.053  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1152', version='1', name='123', lang='JSON', createdOn='Mon Oct 30 07:31:26 CET 2023', lastModified='Mon Oct 30 07:31:26 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 08:04:17.054  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=1, status=READY}]'}
2023-10-30 08:04:53.702  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=1, status=DEPLOYED}]'}
2023-10-30 08:04:53.704  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1152', version='2', name='123', lang='JSON', createdOn='Mon Oct 30 07:31:26 CET 2023', lastModified='Mon Oct 30 07:31:26 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 08:04:53.707  INFO    [Pool-PersistenceTopic-50      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}]'}
2023-10-30 08:06:05.556  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=DEPLOYED}]'}
2023-10-30 08:06:05.557  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1161', version='0', name='new rule', lang='JSON', createdOn='Mon Oct 30 08:06:05 CET 2023', lastModified='Mon Oct 30 08:06:05 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 08:06:05.567  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='new rule', version=0, status=READY}]'}
2023-10-30 08:08:06.694  WARNING [Pool-NotificationQueue-23     ] manager.notification.NotificationService : Error processing from REALM_RULESET - NOTIFICATION_HANDLER_CONFIG_ERROR (Handler is not valid: email): Notification{name='null', message=org.openremote.model.notification.EmailNotificationMessage@1aeda40, repeatFrequency=null, repeatInterval='null', targets=[]}
2023-10-30 08:11:58.156  SEVERE  [Scheduled task-8              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='7GKo92vlzx9xzaKcmo0N30', name='HTTP Weather', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.http.HTTPProtocol.lambda$doStart$1(HTTPProtocol.java:305)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:304)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-30 08:13:23.485  INFO    [Pool-AttributeEventQueue-20   ] te.model.util.ValueUtil.MODEL_AND_VALUES : Failed to coerce value to requested type: input=class java.util.LinkedHashMap, output=class org.openremote.model.value.ValueType$MultivaluedStringMap
java.lang.IllegalArgumentException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('ed02b217540012b28c3d6ff72c8ac711')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["appid"])
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4449)
	at com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4380)
	at org.openremote.model.util.ValueUtil.getValue(ValueUtil.java:308)
	at org.openremote.model.util.ValueUtil.getValueCoerced(ValueUtil.java:335)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$5(AssetProcessingService.java:364)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$8(AssetProcessingService.java:362)
	at org.openremote.container.persistence.PersistenceService.lambda$doTransaction$4(PersistenceService.java:414)
	at org.openremote.container.persistence.PersistenceService.doReturningTransaction(PersistenceService.java:424)
	at org.openremote.container.persistence.PersistenceService.doTransaction(PersistenceService.java:413)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$9(AssetProcessingService.java:328)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.processor.TryProcessor$TryState.run(TryProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.component.seda.SedaConsumer.sendToConsumers(SedaConsumer.java:269)
	at org.apache.camel.component.seda.SedaConsumer.doRun(SedaConsumer.java:187)
	at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:130)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('ed02b217540012b28c3d6ff72c8ac711')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["appid"])
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:63)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1733)
	at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1358)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.handleNonArray(StringCollectionDeserializer.java:286)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:194)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:184)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:27)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:623)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:449)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4444)
	... 23 more
2023-10-30 08:13:23.488  INFO    [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Failed to coerce attribute event value into the correct value type: realm=null, attribute=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestHeaders'}, event value type=class java.util.LinkedHashMap, attribute value type=class org.openremote.model.value.ValueType$MultivaluedStringMap
2023-10-30 08:13:23.493  WARNING [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Error processing from CLIENT - INVALID_VALUE_FOR_WELL_KNOWN_ATTRIBUTE: AttributeEvent{timestamp=Mon Oct 30 08:13:23 CET 2023, attributeState=AttributeState{ref=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestHeaders'}, value={appid=ed02b217540012b28c3d6ff72c8ac711, q=[Rotterdam,nl], units=[metric]}, deleted=false}}
2023-10-30 08:27:09.413  INFO    [Pool-AttributeEventQueue-20   ] te.model.util.ValueUtil.MODEL_AND_VALUES : Failed to coerce value to requested type: input=class java.util.LinkedHashMap, output=class org.openremote.model.value.ValueType$MultivaluedStringMap
java.lang.IllegalArgumentException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('10.8114285')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["lat"])
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4449)
	at com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4380)
	at org.openremote.model.util.ValueUtil.getValue(ValueUtil.java:308)
	at org.openremote.model.util.ValueUtil.getValueCoerced(ValueUtil.java:335)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$5(AssetProcessingService.java:364)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$8(AssetProcessingService.java:362)
	at org.openremote.container.persistence.PersistenceService.lambda$doTransaction$4(PersistenceService.java:414)
	at org.openremote.container.persistence.PersistenceService.doReturningTransaction(PersistenceService.java:424)
	at org.openremote.container.persistence.PersistenceService.doTransaction(PersistenceService.java:413)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$9(AssetProcessingService.java:328)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.processor.TryProcessor$TryState.run(TryProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.component.seda.SedaConsumer.sendToConsumers(SedaConsumer.java:269)
	at org.apache.camel.component.seda.SedaConsumer.doRun(SedaConsumer.java:187)
	at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:130)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('10.8114285')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["lat"])
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:63)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1733)
	at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1358)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.handleNonArray(StringCollectionDeserializer.java:286)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:194)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:184)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:27)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:623)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:449)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4444)
	... 23 more
2023-10-30 08:27:09.421  INFO    [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Failed to coerce attribute event value into the correct value type: realm=null, attribute=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestQueryParameters'}, event value type=class java.util.LinkedHashMap, attribute value type=class org.openremote.model.value.ValueType$MultivaluedStringMap
2023-10-30 08:27:09.425  WARNING [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Error processing from CLIENT - INVALID_VALUE_FOR_WELL_KNOWN_ATTRIBUTE: AttributeEvent{timestamp=Mon Oct 30 08:27:09 CET 2023, attributeState=AttributeState{ref=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestQueryParameters'}, value={lat=10.8114285, lon=106.6663818, appid=ed02b217540012b28c3d6ff72c8ac711}, deleted=false}}
2023-10-30 08:28:05.122  INFO    [Pool-AttributeEventQueue-20   ] te.model.util.ValueUtil.MODEL_AND_VALUES : Failed to coerce value to requested type: input=class java.util.LinkedHashMap, output=class org.openremote.model.value.ValueType$MultivaluedStringMap
java.lang.IllegalArgumentException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('10.8114285')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["lat"])
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4449)
	at com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4380)
	at org.openremote.model.util.ValueUtil.getValue(ValueUtil.java:308)
	at org.openremote.model.util.ValueUtil.getValueCoerced(ValueUtil.java:335)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$5(AssetProcessingService.java:364)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$8(AssetProcessingService.java:362)
	at org.openremote.container.persistence.PersistenceService.lambda$doTransaction$4(PersistenceService.java:414)
	at org.openremote.container.persistence.PersistenceService.doReturningTransaction(PersistenceService.java:424)
	at org.openremote.container.persistence.PersistenceService.doTransaction(PersistenceService.java:413)
	at org.openremote.manager.asset.AssetProcessingService.lambda$configure$9(AssetProcessingService.java:328)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.processor.TryProcessor$TryState.run(TryProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:165)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392)
	at org.apache.camel.component.seda.SedaConsumer.sendToConsumers(SedaConsumer.java:269)
	at org.apache.camel.component.seda.SedaConsumer.doRun(SedaConsumer.java:187)
	at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:130)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.util.ArrayList` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('10.8114285')
 at [Source: UNKNOWN; byte offset: #UNKNOWN] (through reference chain: org.openremote.model.value.ValueType$MultivaluedStringMap["lat"])
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:63)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1733)
	at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1358)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer._deserializeFromString(StdDeserializer.java:311)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.handleNonArray(StringCollectionDeserializer.java:286)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:194)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:184)
	at com.fasterxml.jackson.databind.deser.std.StringCollectionDeserializer.deserialize(StringCollectionDeserializer.java:27)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:623)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:449)
	at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)
	at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4444)
	... 23 more
2023-10-30 08:28:05.130  INFO    [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Failed to coerce attribute event value into the correct value type: realm=null, attribute=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestQueryParameters'}, event value type=class java.util.LinkedHashMap, attribute value type=class org.openremote.model.value.ValueType$MultivaluedStringMap
2023-10-30 08:28:05.131  WARNING [Pool-AttributeEventQueue-20   ] ote.manager.asset.AssetProcessingService : Error processing from CLIENT - INVALID_VALUE_FOR_WELL_KNOWN_ATTRIBUTE: AttributeEvent{timestamp=Mon Oct 30 08:28:05 CET 2023, attributeState=AttributeState{ref=AttributeRef{id='7GKo92vlzx9xzaKcmo0N30', name='requestQueryParameters'}, value={lat=10.8114285, lon=106.6663818}, deleted=false}}
2023-10-30 08:40:56.147  INFO    [Scheduled task-3              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-30 08:40:56.157  INFO    [Scheduled task-3              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-30 08:40:56.507  WARNING [Scheduled task-8              ] gent.protocol.http.HTTPProtocol.PROTOCOL : HTTP Client [https://api.openweathermap.org/data/2.5]: Exception thrown whilst processing polling response [Unexpected character ('B' (code 66)): Expected space separating root-level values
 at [Source: (String)"7B22636F6F7264223A7B226C6F6E223A3130362E363636342C226C6174223A31302E383131347D2C2277656174686572223A5B7B226964223A3830322C226D61696E223A22436C6F756473222C226465736372697074696F6E223A2273636174746572656420636C6F756473222C2269636F6E223A22303364227D5D2C2262617365223A2273746174696F6E73222C226D61696E223A7B2274656D70223A3330352E31322C226665656C735F6C696B65223A3331322E31322C2274656D705F6D696E223A3330352E31322C2274656D705F6D6178223A3330352E31322C227072657373757265223A313030382C2268756D6964697479223A3734"[truncated 474 chars]; line: 1, column: 3]]: https://api.openweathermap.org/data/2.5/weather
2023-10-30 08:41:56.557  WARNING [Scheduled task-3              ] gent.protocol.http.HTTPProtocol.PROTOCOL : HTTP Client [https://api.openweathermap.org/data/2.5]: Exception thrown whilst processing polling response [Unexpected character ('B' (code 66)): Expected space separating root-level values
 at [Source: (String)"7B22636F6F7264223A7B226C6F6E223A3130362E363636342C226C6174223A31302E383131347D2C2277656174686572223A5B7B226964223A3830322C226D61696E223A22436C6F756473222C226465736372697074696F6E223A2273636174746572656420636C6F756473222C2269636F6E223A22303364227D5D2C2262617365223A2273746174696F6E73222C226D61696E223A7B2274656D70223A3330352E31322C226665656C735F6C696B65223A3331322E31322C2274656D705F6D696E223A3330352E31322C2274656D705F6D6178223A3330352E31322C227072657373757265223A313030382C2268756D6964697479223A3734"[truncated 474 chars]; line: 1, column: 3]]: https://api.openweathermap.org/data/2.5/weather
2023-10-30 08:42:56.606  WARNING [Scheduled task-4              ] gent.protocol.http.HTTPProtocol.PROTOCOL : HTTP Client [https://api.openweathermap.org/data/2.5]: Exception thrown whilst processing polling response [Unexpected character ('B' (code 66)): Expected space separating root-level values
 at [Source: (String)"7B22636F6F7264223A7B226C6F6E223A3130362E363636342C226C6174223A31302E383131347D2C2277656174686572223A5B7B226964223A3830322C226D61696E223A22436C6F756473222C226465736372697074696F6E223A2273636174746572656420636C6F756473222C2269636F6E223A22303364227D5D2C2262617365223A2273746174696F6E73222C226D61696E223A7B2274656D70223A3330352E31322C226665656C735F6C696B65223A3331322E31322C2274656D705F6D696E223A3330352E31322C2274656D705F6D6178223A3330352E31322C227072657373757265223A313030382C2268756D6964697479223A3734"[truncated 474 chars]; line: 1, column: 3]]: https://api.openweathermap.org/data/2.5/weather
2023-10-30 08:43:56.654  WARNING [Scheduled task-4              ] gent.protocol.http.HTTPProtocol.PROTOCOL : HTTP Client [https://api.openweathermap.org/data/2.5]: Exception thrown whilst processing polling response [Unexpected character ('B' (code 66)): Expected space separating root-level values
 at [Source: (String)"7B22636F6F7264223A7B226C6F6E223A3130362E363636342C226C6174223A31302E383131347D2C2277656174686572223A5B7B226964223A3830322C226D61696E223A22436C6F756473222C226465736372697074696F6E223A2273636174746572656420636C6F756473222C2269636F6E223A22303364227D5D2C2262617365223A2273746174696F6E73222C226D61696E223A7B2274656D70223A3330352E31322C226665656C735F6C696B65223A3331322E31322C2274656D705F6D696E223A3330352E31322C2274656D705F6D6178223A3330352E31322C227072657373757265223A313030382C2268756D6964697479223A3734"[truncated 474 chars]; line: 1, column: 3]]: https://api.openweathermap.org/data/2.5/weather
2023-10-30 08:55:34.110  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-30 08:55:34.115  INFO    [Scheduled task-7              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-30 16:19:09.599  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-30 16:19:09.635  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-30 16:19:09.636  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-30 16:19:09.636  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-30 16:19:09.638  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 16:19:09.638  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-30 16:19:09.661  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-30 16:19:09.663  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-30 16:19:09.867  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-30 16:19:09.867  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-30 16:19:09.868  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-30 16:19:09.886  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-30 16:19:09.897  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.898  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.936  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.937  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.951  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.952  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.970  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.970  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.998  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:09.999  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.017  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-30 16:19:10.028  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.029  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.033  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-30 16:19:10.034  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-30 16:19:10.036  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-30 16:19:10.046  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.047  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.056  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-30 16:19:10.063  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.064  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-30 16:19:10.148  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-30 16:19:10.650  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-30 16:19:11.184  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-30 16:19:11.970  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 16:19:11.971  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-30 16:19:11.977  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-30 16:19:12.150  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-30 16:19:12.325  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-30 16:19:12.328  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-30 16:19:12.329  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-30 16:19:12.329  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-30 16:19:12.354  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-30 16:19:12.354  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-30 16:19:12.359  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 16:19:12.369  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 16:19:12.370  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 16:19:12.371  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 16:19:12.372  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 16:19:12.373  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 16:19:12.373  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 16:19:12.375  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-30 16:19:12.376  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-30 16:19:12.377  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-30 16:19:12.378  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-30 16:19:12.378  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-30 16:19:12.379  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-30 16:19:12.379  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-30 16:19:12.380  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-30 16:19:12.380  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-30 16:19:12.381  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-30 16:19:12.383  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-30 16:19:12.397  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-30 16:19:12.398  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-30 16:19:12.398  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-30 16:19:12.400  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-30 16:19:12.402  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-30 16:19:12.402  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 16:19:12.416  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 16:19:12.468  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 16:19:12.518  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 16:19:12.518  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 16:19:12.519  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-30 16:19:12.520  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 16:19:12.520  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-30 16:19:12.520  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 16:19:12.520  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 16:19:12.521  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-30 16:19:12.521  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-30 16:19:12.522  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-30 16:19:12.522  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-30 16:19:12.523  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-30 16:19:12.540  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-30 16:19:12.547  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-30 16:19:12.554  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-30 16:19:12.562  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-30 16:19:12.584  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-30 16:19:12.701  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 16:19:12.702  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-30 16:19:12.704  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 16:19:12.705  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-30 16:19:12.707  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-30 16:19:12.707  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-30 16:19:12.708  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-30 16:19:12.749  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-30 16:19:12.750  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-30 16:19:12.751  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-30 16:19:13.421  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-30 16:19:13.422  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-30 16:19:13.422  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-30 16:19:13.508  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-30 16:19:13.508  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-30 16:19:13.509  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-30 16:19:13.629  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-30 16:19:13.635  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-30 16:19:13.646  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-30 16:19:13.664  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-30 16:19:13.666  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-30 16:19:13.688  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-30 16:19:13.825  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-30 16:19:13.826  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-30 16:19:13.826  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=aee58d8d-7737-11ee-937f-0242ac130003] 
2023-10-30 16:19:13.910  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-30 16:19:13.967  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-30 16:19:13.971  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-30 16:19:13.972  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-30 16:19:13.972  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-30 16:19:13.973  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-30 16:19:13.974  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-30 16:19:13.974  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-30 16:19:13.974  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-30 16:19:13.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-30 16:19:13.975  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-30 16:19:13.976  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-30 16:19:14.047  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-30 16:19:14.047  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-30 16:19:14.048  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-30 16:19:14.048  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-30 16:19:14.054  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-30 16:19:14.054  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-30 16:19:14.192  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-30 16:19:14.192  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-30 16:19:14.195  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-30 16:19:14.195  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-30 16:19:14.196  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-30 16:19:14.196  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-30 16:19:14.196  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-30 16:19:14.196  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-30 16:19:14.200  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-30 16:19:14.242  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-30 16:19:14.243  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-30 16:19:14.644  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1152', version='2', name='123', lang='JSON', createdOn='2023-10-30 07:31:26.05', lastModified='2023-10-30 07:31:26.048', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 16:19:14.680  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1161', version='0', name='new rule', lang='JSON', createdOn='2023-10-30 08:06:05.55', lastModified='2023-10-30 08:06:05.549', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 16:19:14.716  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='new rule', version=0, status=READY}]'}
2023-10-30 16:19:14.721  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-30 16:19:14.721  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-30 16:19:14.874  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-30 16:19:14.928  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@95602c9
2023-10-30 16:19:15.013  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-30 16:19:15.026  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:25)
2023-10-30 16:19:15.026  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-30 16:19:15.027  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-30 16:19:15.027  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-30 16:19:15.027  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-30 16:19:15.028  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-30 16:19:15.028  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-30 16:19:15.028  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-30 16:19:15.029  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-30 16:19:15.029  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-30 16:19:15.029  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-30 16:19:15.030  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-30 16:19:15.030  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-30 16:19:15.030  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-30 16:19:15.030  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-30 16:19:15.031  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-30 16:19:15.031  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-30 16:19:15.031  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-30 16:19:15.032  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-30 16:19:15.032  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-30 16:19:15.032  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-30 16:19:15.033  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-30 16:19:15.033  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-30 16:19:15.033  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-30 16:19:15.033  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-30 16:19:15.034  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-30 16:19:15.034  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 346ms (build:35ms init:152ms start:159ms)
2023-10-30 16:19:15.035  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-30 16:19:15.073  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-30 16:19:15.103  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-30 16:19:15.103  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-30 16:19:15.105  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-30 16:19:50.697  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=DEPLOYED}, RulesetDeployment{id=1161, name='new rule', version=0, status=DEPLOYED}]'}
2023-10-30 16:19:50.700  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1161', version='1', name='send email', lang='JSON', createdOn='Mon Oct 30 08:06:05 CET 2023', lastModified='Mon Oct 30 08:06:05 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 16:19:50.701  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='send email', version=1, status=READY}]'}
2023-10-30 16:22:51.842  INFO    [Pool-PersistenceTopic-53      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=DEPLOYED}, RulesetDeployment{id=1161, name='send email', version=1, status=DEPLOYED}]'}
2023-10-30 16:22:51.843  INFO    [Pool-PersistenceTopic-53      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1161', version='2', name='send email', lang='JSON', createdOn='Mon Oct 30 08:06:05 CET 2023', lastModified='Mon Oct 30 08:06:05 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-30 16:22:51.844  INFO    [Pool-PersistenceTopic-53      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='send email', version=2, status=READY}]'}
2023-10-30 16:28:10.874  INFO    [WebService task-8             ] org.openremote.container.web.WebService  : Saving manager_config.json..
2023-10-31 03:11:48.817  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-31 03:11:48.869  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-31 03:11:48.870  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-31 03:11:48.871  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-31 03:11:48.873  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-31 03:11:48.873  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-31 03:11:48.921  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-31 03:11:48.922  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-31 03:11:49.298  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-31 03:11:49.299  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-31 03:11:49.299  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-31 03:11:49.332  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-31 03:11:49.350  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.352  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.428  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.429  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.450  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.451  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.478  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.481  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.510  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.511  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.532  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.015s)
2023-10-31 03:11:49.545  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.546  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.554  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-31 03:11:49.555  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-31 03:11:49.565  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-31 03:11:49.583  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.583  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.597  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.008s)
2023-10-31 03:11:49.605  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.606  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:11:49.747  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-31 03:11:50.602  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-31 03:11:51.374  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-31 03:11:52.209  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-31 03:11:52.209  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-31 03:11:52.217  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-31 03:11:52.417  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-31 03:11:52.435  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-31 03:11:55.439  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-31 03:11:55.626  INFO    [main                          ] org.apache.http.impl.execchain.RetryExec : I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}->http://keycloak:8080: The target server failed to respond
2023-10-31 03:11:55.627  INFO    [main                          ] org.apache.http.impl.execchain.RetryExec : Retrying request to {}->http://keycloak:8080
2023-10-31 03:11:55.631  INFO    [main                          ] org.apache.http.impl.execchain.RetryExec : I/O exception (java.net.SocketException) caught when processing request to {}->http://keycloak:8080: Connection reset
2023-10-31 03:11:55.632  INFO    [main                          ] org.apache.http.impl.execchain.RetryExec : Retrying request to {}->http://keycloak:8080
2023-10-31 03:11:55.633  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak server not available, waiting...
2023-10-31 03:12:23.897  INFO    [main                          ] org.openremote.container.Container       : Metrics enabled: true
2023-10-31 03:12:23.933  INFO    [main                          ] org.openremote.container.Container       : >>> Starting runtime container...
2023-10-31 03:12:23.934  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.syslog.SyslogService
2023-10-31 03:12:23.934  INFO    [main                          ] .openremote.manager.syslog.SyslogService : Syslog service enabled
2023-10-31 03:12:23.936  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-31 03:12:23.936  INFO    [main                          ] container.persistence.PersistenceService : Preparing persistence service for database: POSTGRES
2023-10-31 03:12:23.959  INFO    [main                          ] container.persistence.PersistenceService : Setting storage directory to '/storage'
2023-10-31 03:12:23.960  INFO    [main                          ] container.persistence.PersistenceService : Opening database connection: jdbc:postgresql://postgresql:5432/openremote?currentSchema=openremote
2023-10-31 03:12:24.187  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : Flyway Community Edition 9.15.1 by Redgate
2023-10-31 03:12:24.188  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : See release notes here: https://rd.gt/416ObMi
2023-10-31 03:12:24.188  INFO    [main                          ] ydb.core.internal.license.VersionPrinter : 
2023-10-31 03:12:24.215  INFO    [main                          ] .internal.database.base.BaseDatabaseType : Database: jdbc:postgresql://postgresql:5432/openremote (PostgreSQL 14.6)
2023-10-31 03:12:24.227  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.227  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.268  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.268  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.296  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.297  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.320  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.323  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.338  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.338  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.349  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.005s)
2023-10-31 03:12:24.361  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.361  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.366  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Current version of schema "openremote": 20230120.01
2023-10-31 03:12:24.367  INFO    [main                          ] flywaydb.core.internal.command.DbMigrate : Schema "openremote" is up to date. No migration necessary.
2023-10-31 03:12:24.370  INFO    [main                          ] container.persistence.PersistenceService : Applied database schema migrations: 0
2023-10-31 03:12:24.381  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.382  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.392  INFO    [main                          ] lywaydb.core.internal.command.DbValidate : Successfully validated 7 migrations (execution time 00:00.004s)
2023-10-31 03:12:24.400  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.401  WARNING [main                          ] ernal.sqlscript.DefaultSqlScriptExecutor : DB: extension "timescaledb_toolkit" already exists, skipping (SQL State: 42710 - Error Code: 0)
2023-10-31 03:12:24.496  INFO    [main                          ] te.model.util.ValueUtil.MODEL_AND_VALUES : Initialising asset model...
2023-10-31 03:12:25.059  INFO    [main                          ] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2023-10-31 03:12:25.608  ERROR   [main                          ] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: value involves formulas
2023-10-31 03:12:26.410  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.ManagerIdentityService
2023-10-31 03:12:26.411  INFO    [main                          ] .manager.security.ManagerIdentityService : Enabling Keycloak identity provider
2023-10-31 03:12:26.417  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak service URL: http://keycloak:8080/auth
2023-10-31 03:12:26.590  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Connecting to Keycloak server: http://keycloak:8080/auth
2023-10-31 03:12:26.740  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak identity provider available: http://keycloak:8080/auth
2023-10-31 03:12:26.743  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.setup.SetupService
2023-10-31 03:12:26.743  INFO    [main                          ] rg.openremote.manager.setup.SetupService : Setup service disabled, clean install = false
2023-10-31 03:12:26.744  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayService
2023-10-31 03:12:26.772  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.timer.TimerService
2023-10-31 03:12:26.773  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetStorageService
2023-10-31 03:12:26.778  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-31 03:12:26.787  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.provisioning.ProvisioningService
2023-10-31 03:12:26.788  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-31 03:12:26.789  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-31 03:12:26.790  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesetStorageService
2023-10-31 03:12:26.791  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AttributeLinkingService
2023-10-31 03:12:26.791  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetProcessingService
2023-10-31 03:12:26.793  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.system.HealthService
2023-10-31 03:12:26.794  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.JvmHealthStatusProvider
2023-10-31 03:12:26.795  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SslHealthStatusProvider
2023-10-31 03:12:26.795  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.SystemHealthStatusProvider
2023-10-31 03:12:26.796  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.rules.RulesHealthStatusProvider
2023-10-31 03:12:26.796  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.agent.AgentHealthStatusProvider
2023-10-31 03:12:26.797  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetDatapointHealthStatusProvider
2023-10-31 03:12:26.797  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.datapoint.AssetPredictedDatapointHealthStatusProvider
2023-10-31 03:12:26.798  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.manager.system.CamelHealthStatusProvider
2023-10-31 03:12:26.799  INFO    [main                          ] .openremote.manager.system.HealthService : Health Status Provider: class org.openremote.container.persistence.PersistenceHealthStatusProvider
2023-10-31 03:12:26.800  INFO    [main                          ] .openremote.manager.system.HealthService : Metrics collection enabled
2023-10-31 03:12:26.816  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.simulator.SimulatorService
2023-10-31 03:12:26.817  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.map.MapService
2023-10-31 03:12:26.818  WARNING [main                          ] org.openremote.manager.map.MapService    : Map tiles data file not found '/deployment.local/mapdata/mapdata.mbtiles', falling back to built in map
2023-10-31 03:12:26.819  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.NotificationService
2023-10-31 03:12:26.821  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.webhook.WebhookService
2023-10-31 03:12:26.821  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.apps.ConsoleAppService
2023-10-31 03:12:26.837  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-31 03:12:26.896  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.PushNotificationHandler
2023-10-31 03:12:26.944  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-31 03:12:26.944  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.gateway.GatewayClientService
2023-10-31 03:12:26.945  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.AssetModelService
2023-10-31 03:12:26.946  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-31 03:12:26.946  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastWindService
2023-10-31 03:12:26.946  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.energy.ForecastSolarService
2023-10-31 03:12:26.947  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-31 03:12:26.947  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.security.AuthorisationService
2023-10-31 03:12:26.948  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.app.ConfigurationService
2023-10-31 03:12:26.948  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.asset.ForecastService
2023-10-31 03:12:26.948  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.agent.AgentService
2023-10-31 03:12:26.949  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.event.ClientEventService
2023-10-31 03:12:26.964  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.RulesService
2023-10-31 03:12:26.970  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.container.message.MessageBrokerService
2023-10-31 03:12:26.978  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.web.ManagerWebService
2023-10-31 03:12:26.987  INFO    [main                          ] org.openremote.container.web.WebService  : Building web routing with handler(s): Console app info files
2023-10-31 03:12:27.008  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /api
2023-10-31 03:12:27.122  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-31 03:12:27.123  INFO    [main                          ] org.openremote.container.web.WebService  : Deploying insecure web context: /
2023-10-31 03:12:27.125  INFO    [main                          ] org.openremote.container.Container       : Initializing service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-31 03:12:27.126  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.syslog.SyslogService
2023-10-31 03:12:27.127  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.persistence.ManagerPersistenceService
2023-10-31 03:12:27.127  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.ManagerIdentityService
2023-10-31 03:12:27.128  INFO    [main                          ] security.ManagerKeycloakIdentityProvider : Loading OR_KEYCLOAK_GRANT_FILE: /deployment/manager/keycloak.json
2023-10-31 03:12:27.161  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Found stored credentials so attempting to use them
2023-10-31 03:12:27.163  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Keycloak proxy URI set to: http://keycloak:8080/auth
2023-10-31 03:12:27.163  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Validating keycloak credentials
2023-10-31 03:12:27.791  INFO    [main                          ] curity.keycloak.KeycloakIdentityProvider : Credentials are valid
2023-10-31 03:12:27.791  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.setup.SetupService
2023-10-31 03:12:27.791  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayService
2023-10-31 03:12:27.869  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.timer.TimerService
2023-10-31 03:12:27.869  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetStorageService
2023-10-31 03:12:27.870  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.mqtt.MQTTBrokerService
2023-10-31 03:12:27.977  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221000: live Message Broker is starting with configuration Broker Configuration (clustered=false,journalDirectory=data/journal,bindingsDirectory=data/bindings,largeMessagesDirectory=data/largemessages,pagingDirectory=data/paging)
2023-10-31 03:12:27.992  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221045: libaio is not available, switching the configuration into NIO
2023-10-31 03:12:28.003  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221057: Global Max Size is being adjusted to 1/2 of the JVM max size (-Xmx). being defined as 1073741824
2023-10-31 03:12:28.023  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-server]. Adding protocol support for: CORE
2023-10-31 03:12:28.023  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221043: Protocol module found: [artemis-mqtt-protocol]. Adding protocol support for: MQTT
2023-10-31 03:12:28.044  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ224092: Despite disabled persistence, page files will be persisted.
2023-10-31 03:12:28.148  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221020: Started NIO Acceptor at 0.0.0.0:1883 for protocols [MQTT]
2023-10-31 03:12:28.149  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221007: Server is now live
2023-10-31 03:12:28.149  INFO    [main                          ] org.apache.activemq.artemis.core.server  : AMQ221001: Apache ActiveMQ Artemis Message Broker version 2.29.0 [localhost, nodeID=f08c6fe9-7792-11ee-92d1-0242ac130004] 
2023-10-31 03:12:28.220  INFO    [main                          ] mote.manager.mqtt.DefaultMQTTHandler.API : Adding publish consumer for topic '+/+/writeattributevalue/#': handler=DefaultMQTTHandler
2023-10-31 03:12:28.280  INFO    [main                          ] qtt.UserAssetProvisioningMQTTHandler.API : Adding publish consumer for topic 'provisioning/+/request': handler=UserAssetProvisioningMQTTHandler
2023-10-31 03:12:28.286  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.provisioning.ProvisioningService
2023-10-31 03:12:28.287  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetDatapointService
2023-10-31 03:12:28.287  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.datapoint.AssetPredictedDatapointService
2023-10-31 03:12:28.288  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesetStorageService
2023-10-31 03:12:28.288  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AttributeLinkingService
2023-10-31 03:12:28.289  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetProcessingService
2023-10-31 03:12:28.289  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.system.HealthService
2023-10-31 03:12:28.289  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.simulator.SimulatorService
2023-10-31 03:12:28.290  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.map.MapService
2023-10-31 03:12:28.290  INFO    [main                          ] org.openremote.manager.map.MapService    : Starting map service with tile data: /deployment/map/mapdata.mbtiles
2023-10-31 03:12:28.356  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.NotificationService
2023-10-31 03:12:28.356  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.webhook.WebhookService
2023-10-31 03:12:28.356  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.apps.ConsoleAppService
2023-10-31 03:12:28.356  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.PushNotificationHandler
2023-10-31 03:12:28.361  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.notification.EmailNotificationHandler
2023-10-31 03:12:28.362  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.gateway.GatewayClientService
2023-10-31 03:12:28.486  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.AssetModelService
2023-10-31 03:12:28.486  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.EnergyOptimisationService
2023-10-31 03:12:28.489  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastWindService
2023-10-31 03:12:28.489  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.energy.ForecastSolarService
2023-10-31 03:12:28.489  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.dashboard.DashboardStorageService
2023-10-31 03:12:28.490  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.security.AuthorisationService
2023-10-31 03:12:28.490  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.app.ConfigurationService
2023-10-31 03:12:28.490  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.asset.ForecastService
2023-10-31 03:12:28.494  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.agent.AgentService
2023-10-31 03:12:28.536  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.event.ClientEventService
2023-10-31 03:12:28.537  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.RulesService
2023-10-31 03:12:28.868  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1152', version='2', name='123', lang='JSON', createdOn='2023-10-30 07:31:26.05', lastModified='2023-10-30 07:31:26.048', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-31 03:12:28.907  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1161', version='2', name='send email', lang='JSON', createdOn='2023-10-30 08:06:05.55', lastModified='2023-10-30 08:06:05.549', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-31 03:12:28.942  INFO    [main                          ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='send email', version=2, status=READY}]'}
2023-10-31 03:12:28.948  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.container.message.MessageBrokerService
2023-10-31 03:12:28.948  INFO    [main                          ] e.container.message.MessageBrokerService : Starting Camel message broker
2023-10-31 03:12:29.085  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) is starting
2023-10-31 03:12:29.136  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Using ThreadPoolFactory: org.openremote.container.message.MessageBrokerService$1@163ee26b
2023-10-31 03:12:29.230  INFO    [main                          ] emote.container.security.IdentityService : Securing web deployment: /websocket/events
2023-10-31 03:12:29.246  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Routes startup (started:25)
2023-10-31 03:12:29.246  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayAsset (seda://PersistenceTopic)
2023-10-31 03:12:29.246  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Asset (seda://PersistenceTopic)
2023-10-31 03:12:29.247  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Query (seda://ClientInboundQueue)
2023-10-31 03:12:29.247  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-UserAndAssetLink (seda://PersistenceTopic)
2023-10-31 03:12:29.247  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-DefaultMQTTHandler (seda://ClientOutboundQueue)
2023-10-31 03:12:29.248  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-MQTTConnectedAttributes (seda://PersistenceTopic)
2023-10-31 03:12:29.248  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started AttributeEventProcessor (seda://AttributeEventQueue)
2023-10-31 03:12:29.248  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-ReadSimulatorState (seda://ClientInboundQueue)
2023-10-31 03:12:29.248  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started NotificationQueue (seda://NotificationQueue)
2023-10-31 03:12:29.249  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-PushNotificationConsoleAsset (seda://PersistenceTopic)
2023-10-31 03:12:29.249  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GatewayConnection (seda://PersistenceTopic)
2023-10-31 03:12:29.249  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-Websocket (ws://0.0.0.0/websocket/events)
2023-10-31 03:12:29.249  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientInbound-EventProcessor (seda://ClientInboundQueue)
2023-10-31 03:12:29.250  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Splitter (seda://ClientPublishQueue)
2023-10-31 03:12:29.250  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ClientOutbound-Websocket (seda://ClientOutboundQueue)
2023-10-31 03:12:29.250  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Ruleset (seda://PersistenceTopic)
2023-10-31 03:12:29.250  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesRealm (seda://PersistenceTopic)
2023-10-31 03:12:29.251  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-RulesAsset (seda://PersistenceTopic)
2023-10-31 03:12:29.251  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-GeofenceAdapterConsoleAsset (seda://PersistenceTopic)
2023-10-31 03:12:29.252  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ProvisioningConfig (seda://PersistenceTopic)
2023-10-31 03:12:29.252  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-EnergyOptimisation (seda://PersistenceTopic)
2023-10-31 03:12:29.253  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-ForecastConfiguration (seda://PersistenceTopic)
2023-10-31 03:12:29.253  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started Persistence-Agent (seda://PersistenceTopic)
2023-10-31 03:12:29.253  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolOutbound (seda://SensorQueue)
2023-10-31 03:12:29.257  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext :     Started ProtocolInbound-HTTP Client7GKo92vlzx9xzaKcmo0N30 (seda://ActuatorTopic)
2023-10-31 03:12:29.257  INFO    [main                          ] e.camel.impl.engine.AbstractCamelContext : Apache Camel 3.20.6 (camel-1) started in 341ms (build:33ms init:136ms start:172ms)
2023-10-31 03:12:29.259  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.web.ManagerWebService
2023-10-31 03:12:29.293  INFO    [main                          ] org.jboss.threads                        : JBoss Threads version 3.5.0.Final
2023-10-31 03:12:29.319  INFO    [main                          ] org.openremote.container.web.WebService  : Webserver ready on http://0.0.0.0:8080
2023-10-31 03:12:29.320  INFO    [main                          ] org.openremote.container.Container       : Starting service: org.openremote.manager.rules.geofence.ORConsoleGeofenceAssetAdapter
2023-10-31 03:12:29.322  INFO    [main                          ] org.openremote.container.Container       : >>> Runtime container startup complete
2023-10-31 03:14:48.086  SEVERE  [Scheduled task-4              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='2iEDNCLbLfV3kSGhF6tkLn', name='New Asset', type ='HTTPAgent', parentId='7GKo92vlzx9xzaKcmo0N30', realm='master'}
java.lang.RuntimeException: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.http.HTTPProtocol.lambda$doStart$1(HTTPProtocol.java:305)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:304)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-31 03:15:16.348  SEVERE  [Scheduled task-3              ] rg.openremote.manager.agent.AgentService : Failed to start protocol instance for agent: HTTPAgent{id='5Pg5gY1JLgnSQ1UeGqvYgw', name='HTTP Weather forecast', type ='HTTPAgent', parentId='null', realm='master'}
java.lang.RuntimeException: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:109)
	at org.openremote.manager.agent.AgentService.startAgent(AgentService.java:392)
	at org.openremote.manager.agent.AgentService.lambda$doAgentInit$15(AgentService.java:381)
	at io.micrometer.core.instrument.internal.TimedRunnable.run(TimedRunnable.java:49)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.lang.IllegalArgumentException: Missing or invalid base URI attribute: HTTP Client[]
	at org.openremote.agent.protocol.http.HTTPProtocol.lambda$doStart$1(HTTPProtocol.java:305)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at org.openremote.agent.protocol.http.HTTPProtocol.doStart(HTTPProtocol.java:304)
	at org.openremote.agent.protocol.AbstractProtocol.start(AbstractProtocol.java:106)
	... 9 more
2023-10-31 03:24:18.318  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client5Pg5gY1JLgnSQ1UeGqvYgw (seda://ActuatorTopic)
2023-10-31 03:24:18.320  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client5Pg5gY1JLgnSQ1UeGqvYgw (seda://ActuatorTopic)
2023-10-31 03:35:25.291  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Stopped ProtocolInbound-HTTP Client49KKuWnIyGc0VH2Aj9eI1b (seda://ActuatorTopic)
2023-10-31 03:35:25.301  INFO    [Scheduled task-8              ] e.camel.impl.engine.AbstractCamelContext : Shutdown ProtocolInbound-HTTP Client49KKuWnIyGc0VH2Aj9eI1b (seda://ActuatorTopic)
2023-10-31 03:57:26.036  WARNING [Pool-AttributeEventQueue-24   ] ote.manager.asset.AssetProcessingService : Error processing from SENSOR (protocol: HTTP Client) - PROCESSOR_FAILURE (processor 'AttributeLinkingService{}' threw an exception): AttributeEvent{timestamp=Tue Oct 31 03:57:26 CET 2023, attributeState=AttributeState{ref=AttributeRef{id='662e9vIBYI9QvaUUAmsJRE', name='forecastData'}, value={"cod":"200","message":0,"cnt":40,"list":[{"dt":1698721200,"main":{"temp":30.97,"feels_like":37.97,"..., deleted=false}}
2023-10-31 04:02:55.017  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=DEPLOYED}, RulesetDeployment{id=1161, name='send email', version=2, status=DEPLOYED}]'}
2023-10-31 04:02:55.019  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1199', version='0', name='update', lang='GROOVY', createdOn='Tue Oct 31 04:02:55 CET 2023', lastModified='Tue Oct 31 04:02:55 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-31 04:02:55.328  SEVERE  [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Ruleset compilation error: update
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script1.groovy: 13: unable to resolve class org.simplejavamail.email.Email
 @ line 13, column 1.
   import org.simplejavamail.email.Email
   ^

1 error

	at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:292)
	at org.codehaus.groovy.control.CompilationUnit$ISourceUnitOperation.doPhaseOperation(CompilationUnit.java:914)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:627)
	at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:389)
	at groovy.lang.GroovyClassLoader.lambda$parseClass$3(GroovyClassLoader.java:332)
	at org.codehaus.groovy.runtime.memoize.StampedCommonCache.compute(StampedCommonCache.java:163)
	at org.codehaus.groovy.runtime.memoize.StampedCommonCache.getAndPut(StampedCommonCache.java:154)
	at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:330)
	at groovy.lang.GroovyShell.parseClass(GroovyShell.java:526)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:538)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:570)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:565)
	at org.openremote.manager.rules.RulesetDeployment.compileRulesGroovy(RulesetDeployment.java:480)
	at org.openremote.manager.rules.RulesetDeployment.compile(RulesetDeployment.java:248)
	at org.openremote.manager.rules.RulesetDeployment.init(RulesetDeployment.java:181)
	at org.openremote.manager.rules.RulesEngine.addRuleset(RulesEngine.java:271)
	at org.openremote.manager.rules.RulesService.deployRealmRuleset(RulesService.java:695)
	at org.openremote.manager.rules.RulesService.processRulesetChange(RulesService.java:595)
	at org.openremote.manager.rules.RulesService.lambda$configure$2(RulesService.java:244)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:54)
	at org.apache.camel.processor.MulticastProcessor.lambda$schedule$1(MulticastProcessor.java:336)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-31 04:02:55.330  INFO    [Pool-PersistenceTopic-46      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='send email', version=2, status=READY}, RulesetDeployment{id=1199, name='update', version=0, status=COMPILATION_ERROR}]'}
2023-10-31 04:03:13.472  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Stopping: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=DEPLOYED}, RulesetDeployment{id=1161, name='send email', version=2, status=DEPLOYED}, RulesetDeployment{id=1199, name='update', version=0, status=COMPILATION_ERROR}]'}
2023-10-31 04:03:13.474  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Compiling ruleset deployment: RealmRuleset{id='1199', version='1', name='update', lang='GROOVY', createdOn='Tue Oct 31 04:02:55 CET 2023', lastModified='Tue Oct 31 04:02:55 CET 2023', enabled='true', meta='{}', realm='master', accessPublicRead='false'}
2023-10-31 04:03:13.528  SEVERE  [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Ruleset compilation error: update
org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Script2.groovy: 13: unable to resolve class org.simplejavamail.email.Email
 @ line 13, column 1.
   import org.simplejavamail.email.Email
   ^

1 error

	at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:292)
	at org.codehaus.groovy.control.CompilationUnit$ISourceUnitOperation.doPhaseOperation(CompilationUnit.java:914)
	at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:627)
	at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:389)
	at groovy.lang.GroovyClassLoader.lambda$parseClass$3(GroovyClassLoader.java:332)
	at org.codehaus.groovy.runtime.memoize.StampedCommonCache.compute(StampedCommonCache.java:163)
	at org.codehaus.groovy.runtime.memoize.StampedCommonCache.getAndPut(StampedCommonCache.java:154)
	at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:330)
	at groovy.lang.GroovyShell.parseClass(GroovyShell.java:526)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:538)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:570)
	at groovy.lang.GroovyShell.parse(GroovyShell.java:565)
	at org.openremote.manager.rules.RulesetDeployment.compileRulesGroovy(RulesetDeployment.java:480)
	at org.openremote.manager.rules.RulesetDeployment.compile(RulesetDeployment.java:248)
	at org.openremote.manager.rules.RulesetDeployment.init(RulesetDeployment.java:181)
	at org.openremote.manager.rules.RulesEngine.addRuleset(RulesEngine.java:271)
	at org.openremote.manager.rules.RulesService.deployRealmRuleset(RulesService.java:695)
	at org.openremote.manager.rules.RulesService.processRulesetChange(RulesService.java:595)
	at org.openremote.manager.rules.RulesService.lambda$configure$2(RulesService.java:244)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:54)
	at org.apache.camel.processor.MulticastProcessor.lambda$schedule$1(MulticastProcessor.java:336)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
2023-10-31 04:03:13.529  INFO    [Pool-PersistenceTopic-47      ] org.openremote.manager.rules.RulesEngine : Starting: RulesEngine{id='RulesEngineId{scope=RealmRuleset, realm='master', assetId='null'}', running='false', deployments='[RulesetDeployment{id=1152, name='123', version=2, status=READY}, RulesetDeployment{id=1161, name='send email', version=2, status=READY}, RulesetDeployment{id=1199, name='update', version=1, status=COMPILATION_ERROR}]'}
